<!doctype html><html lang=ja><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=description content="数学によってもたらされる美しい図像「マンデルブロ集合」を高校数学の知識だけで描画することを試みます。"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/scss/styles.min.4a71567d35f0565714f9b264f620dd2c5abcdd3fd6d8bc1fe2bafa8114c2fe47.css><link rel=icon href=/image/favicon.svg type=image/svg+xml><link rel="icon alternate" href=/image/favicon.ico><meta property="og:site_name" content="浅野学園物理部"><meta property="og:url" content="https://asanobuturi.github.io/blog/20220508/index.html"><meta property="og:title" content="高校数学で描くマンデルブロ集合｜浅野学園物理部"><meta property="og:description" content="数学によってもたらされる美しい図像「マンデルブロ集合」を高校数学の知識だけで描画することを試みます。"><meta property="og:type" content="website"><meta property="og:image" content="https://asanobuturi.github.io/blog/20220508/thumbnail.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@Uchi54_APC"><link rel=canonical href=https://asanobuturi.github.io/blog/20220508/><script async src="https://www.googletagmanager.com/gtag/js?id=G-M4YH1E5WC1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-M4YH1E5WC1")</script><title>高校数学で描くマンデルブロ集合｜浅野学園物理部</title><style>#indexblock ol ul>li>ul{display:none}</style><script type=text/javascript src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<link rel=stylesheet href=/scss/highlight.min.73c2904dee97b8576e713db5b57d11b9992459d4dd299c5dc830e98f92c41f30.css><link rel=stylesheet href=/scss/article.min.5ee3cae303b380c098ecc9cafc8ef5f27c4e7d9864fa43a00560f808df467ab1.css><link rel=stylesheet href=/scss/tableOfContents.min.603245923695f62c9be0618c1b6a10599acbf0f4f5056ffe631acd014b70fd17.css></head><body><nav id=nav-drawer><input id=nav-input type=checkbox class=nav-unshown>
<label id=nav-open for=nav-input><span class="bar bar1"></span>
<span class="bar bar2"></span>
<span class="bar bar3"></span>
<span class=menu>MENU</span>
<span class=close>CLOSE</span></label>
<label id=nav-close for=nav-input></label><div id=nav-content><a href=/index.html><img loading=lazy src=/image/favicon.svg id=nav-logo alt=浅野学園物理部></a>
<a class=nav-link href=/index.html>ホーム</a>
<a class=nav-link href=/about/index.html>物理部とは</a>
<a class=nav-link href=/document/index.html>部誌</a>
<a class=nav-link href=/game/index.html>ゲーム</a>
<a class="nav-link isActive" href=/blog/index.html>ブログ</a>
<a class=nav-link href=/electronic/index.html>電工の部屋</a><hr><a class=nav-link href=/credit/index.html>クレジット(ライセンス)</a></div></nav><main><div id=content><a name=top></a><div id=breadcrumbs><a href=/index.html><img src=/image/icons/home-solid.svg class=inline-image>ホーム</a>
<img src=/image/icons/angle-right-solid.svg class=inline-image>
<a href=/blog/>ブログ</a>
<img src=/image/icons/angle-right-solid.svg class=inline-image>
<a href=/blog/20220508/>高校数学で描くマンデルブロ集合</a></div><header id=overview><h1 id=title>高校数学で描くマンデルブロ集合</h1><div><div class=properties><p><span class=author><img src=/image/icons/user-edit-solid.svg class=inline-image>
高三 N</span>
<span class=tags><img src=/image/icons/tags-solid.svg class="inline-image tag-icon">
<a class=tag href=/blog/tags/%E6%95%B0%E5%AD%A6>数学</a><a class=tag href=/blog/tags/javascript>JavaScript</a></span></p><p class=date><img src=/image/icons/pen-to-square-solid.svg class=inline-image><time datetime=2022-05-08>2022年5月8日</time>
<img src=/image/icons/arrow-rotate-right-solid.svg class=inline-image><time datetime=2022-05-08>2022年5月15日</time></p></div><div class=share><span><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-related=Uchi54_apc data-lang=ja data-show-count=false>Tweet</a>
<script async src=https://platform.twitter.com/widgets.js></script></span></div></div></header><article><h2 id=はじめに>はじめに</h2><p>お久しぶりです。2019年に最後のブログを投稿してから3年以上が経ったようなのですが、当時中学2年だった私もいつの間にか高校三年になってしまいました。物理部がブログではなくTwitterを積極的に使うようになってからは、このウェブサイトも部誌の電子版の公開以外で使うことはほとんどなくなったのです。浅野を卒業する前にもう一度くらいはブログ記事を執筆しておきたいと思い、今回キーボードをたたいています。 前置きはさておき、今回は久しぶり(そりゃそうだろ)に技術的な記事になります。</p><h2 id=対象読者>対象読者</h2><p>日本の高校一年生相当以上の基本的な数学の知識を有している人。必要な知識を前半部分で解説し、高校一年生、あるいは中学生程度でもある程度は理解できるように書いているつもりです。</p><p>加えて、基本的なプログラミングの知識を有している人。今回はJavascriptを使用しますが、for文、変数などの一般的な文法が分かっていればおおよそ意味はつかめると思います。</p><h2 id=マンデルブロ集合とは>マンデルブロ集合とは</h2><p>マンデルブロ集合というものを知っていますか？実態はただの複素数の集合<sup><a href>※</a></sup>なのですが、よくこのような写真の形でウェブ上に共有されることがあります。</p><blockquote><h4 id=集合とは>※集合とは</h4><p>日本では「数学A」で学習する概念。 数やその他さまざまなものの集まりのこと。集合を構成する「要素」は数だけでなく、(たぶん)確率や式であったり、数学以外の分野に集合の考え方を応用すれば「単語」や「情報」であるパターンもある(と思う)。 マンデルブロ集合は、数、そのなかでも複素数の集合である。つまり、マンデルブロ集合の中には(\(-0.2+0.5i\))や(\(0.1-0.3i\))などの様々な複素数が大量に収納されている。(複素数については後程解説します。)</p></blockquote><figure><img src=1024px-Mandel_zoom_00_mandelbrot_set.webp><figcaption>マンデルブロ集合の画像</figcaption></figure><figure><img src=1024px-Mandel_zoom_12_satellite_spirally_wheel_with_julia_islands.webp><figcaption>一部を拡大したマンデルブロ集合の画像</figcaption></figure><p>画像出典：<a href=https://en.wikipedia.org/wiki/File:Mandel_zoom_00_mandelbrot_set.webp>Wikimedia Commons</a>(CC BY-SA 3.0)</p><p>下の画像は一部を拡大したもの。</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/gva-evKs_8A style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><p>このように、マンデルブロ集合をある規則にしたがって画像に落とし込むと、非常に美しい幾何学模様をみせるため、YouTubeをはじめインターネット上にはマンデルブロ集合を描画した映像がたくさん投稿されています。</p><p>この記事では、このようなマンデルブロ集合の写真を、高校数学の知識だけで描画することを試みます。なお、今回は<strong>上記の写真や映像のようなカラフルな色付けは行いません</strong>。</p><p>マンデルブロ集合の実態は、以下の漸化式が無限大に発散しないような複素数\(C\)の集まりです。(より正確な定義を後程記載)</p><p>\[
\begin {cases}
Z_0 = 0\\
Z_{n+1} = {Z_n}^2 + C
\end {cases}
\]</p><p>このように定義されるマンデルブロ集合を構成する各複素数を複素数平面上に黒い点としてプロットしていくと、おおよそ上記の写真のような画像が得られます。</p><p>さて、一応ここまで高校数学の用語だけを用いて解説してきましたが、まだ該当範囲を学んでいない人にとってはちんぷんかんぷんだと思いますので、ここから一つ一つ噛み砕いて理解していきましょう。</p><p>ここから下は、複素数、複素数平面、漸化式、極限についての基礎知識の解説が続きます。これらを既に理解している方は、「マンデルブロ集合の要素を調べる」の章まで読み飛ばして頂いて構いません。</p><h2 id=複素数数学で学習とは>複素数(数学Ⅱで学習)とは</h2><p>中学三年で習う平方根(ルート)を思い出してください。\(2\times2=4\)であるとき、\(4\)のルートすなわち\(\sqrt4\)は\(2\)となります。同様に\(3\times3=9\)なので、\(\sqrt9=3\)です。このように、ある数に対して、2乗することでその「ある数」となるような「別のある数」を求めるのがルートの計算です。</p><p>なお、\((-2)\times(-2)=4\)でもあるため、正確には\(\sqrt4=\pm2\)となります。また、\(\sqrt2\)などの値もコンピューターなどを使うことでおおよそ\(\pm1.41421356\)という値(近似値)を求めることが出来ます。実際に電卓でこの数を2乗してみれば、約2(1.999999993…くらい)になることが確認できると思います。</p><h3 id=虚数の定義>虚数の定義</h3><p>さて、ここで負の数のルートを考えてみます。 \(\sqrt{-1}\)はいくつでしょうか？</p><p>\(\sqrt1\)であれば答えは\(\pm1\)、すなわち\(1\)と\(-1\)ですが、2乗して\(-1\)となるような数は存在するのでしょうか？</p><p>はい、そんな数は存在しません。正確には、実数(整数、分数&少数、ルートや円周率などの無理数)の中には存在しません。そこで、先ほど2乗して\(2\)になるような、少数で正確に表せない数を\(\sqrt2\)という記号で表したように、2乗して\(-1\)になるような数を\(i\)という記号を用いて考えることになったのです。つまり、\(i^2=-1\)であり、\(\pm i=\sqrt{-1}\)です。このような、2乗して負の数になるような数を、「虚数」と呼びます。</p><p>この、\(\pm i =\sqrt{-1}\)で定義される数\(i\)には、「虚数単位」という名前がついています。\(\pm i\)とあるように、この方程式の解はプラスマイナスの2つがありますが、虚数単位はそのどちらか片方のみを表します(計算の途中でプラスとマイナスをごっちゃにして考えなければどちらでも問題ない)。</p><p>虚数単位を使うことで、\(\sqrt{-1}\)だけでなく負の数のルートをなんでも表すことが出来るようになります。</p><p>例えば\(\sqrt{-5}\)は\(\sqrt{-5}=\sqrt{-1}\times\sqrt5\)と書き換えられますから、\(\sqrt{-5}=\pm\sqrt5i\)です。同様に\(\sqrt{-4}=\pm2i\)、\(\sqrt{-12}=\pm2\sqrt3i\)という風に表すことが可能です。</p><p>二次方程式の解の公式で、\(x^2+bx+c=0\)の解\(x=\frac{-b\pm\sqrt{b^2-4ac}}{2ac}\)のルートの中身\((b^2-4ac)\)が負の数になると「この二次方程式は実数解をもたない」だと言ったり、正の場合は「異なる実数解を2つもつ」というフレーズが出てきたりするように、ことあるごとに実数解という面倒な言葉を使うのは、ルートの中身が負の数であった場合には虚数解(複素数解)があるということの裏返しだとも考えられますね。</p><h3 id=複素数の定義>複素数の定義</h3><p>先ほど定義した虚数単位\(i\)と2つの実数\(a,b\)を用いて、\[Z = a+bi\]と表すことの出来る数を「複素数」と呼びます。例えば\(3+4i\)という風に表される数のことです。</p><p>「\(5\)」のような普通の実数も、\(a=5,b=0\)を代入してみれば\(Z=5+0i=5\)と表せるので、複素数の一種と考えることが出来ます。逆に「\(\sqrt{-25}\)」のような虚数(「純虚数」と呼びます)も、\(Z=0+5i=5i\)と表せるので当然複素数の一部です。</p><p>ちなみに、このときに\(a\)の項を「実部」、\(bi\)の項を「虚部」と呼ぶことがあるので覚えておきましょう。</p><p>今までに出てきたいろいろな数のカテゴリー(体系)をまとめてみました。</p><figure><img src=various-numbers.webp><figcaption aria-hidden=true>さまざまな数</figcaption></figure><p>複素数の計算は、普通の一次多項式の計算と全く同じように行うことが出来ます。 例えば\((1+2i)+(3+2i)\)という計算は、そのまま\(4+4i\)という風に計算できますし、\((1+2i)^2\)のような場合は展開公式をそのまま使って\((1+4i+4i^2)\)となります。\(i^2=-1\)なので、最終的には\(-3+4i\)です。</p><h2 id=複素数平面数学で学習とは>複素数平面(数学Ⅲで学習)とは</h2><p>数直線というものがありますよね。</p><figure><img src=su-chokusen.webp alt=数直線><figcaption aria-hidden=true>数直線</figcaption></figure><p>一定間隔に引いた目盛りに数を割り当てて、ある数がどの位の大きさなのかを比較しやすくしたものです。複素数を数直線上に描くことを考えてみましょう。 例えば、複素数\(1+2i\)はどこにあるでしょうか？</p><p>残念ながら、先ほどの「さまざまな数」の図で示したように、実数の中に\(1+2i\)のような複素数は含まれません。そのため、実数を描いている数直線上に複素数を描くことは出来ません。 ですが、\(Z=a+bi\)であらわされる複素数\(Z\)のうち、\(a\)部分だけなら実数なので、これだけなら数直線上にも描くことが出来ます。</p><p>複素数平面は、これに加え、虚数単位\(i\)の係数\(b\)を、数直線と垂直な方向に新たに作った軸上に描くことで、複素数\(Z=a+bi\)を\(ab\)平面上に描くことが出来るようにした平面のことを言います。\(Z=X+Yi\)と考えれば、\(XY\)平面の点\((X,Y)\)に点を描くという単純な作業になります。</p><p>ということで、複素数\(1+2i\)は、複素数平面上ではこのような場所にあります。</p><figure><img src=complex-plane.webp alt=複素数平面><figcaption aria-hidden=true>複素数平面</figcaption></figure><p>この時、\(a\)軸のことを実軸、\(b\)軸のことを虚軸といいます。</p><p>複素数をこのような平面上に描くことは、ド・モアブルの定理などにより複素数が図形的意味を持つことになるため非常に便利なのですが、マンデルブロ集合の描画においてあまり重要ではなく、解説が非常に長くなるためここではその解説は省きます。詳しくは、数学Ⅲの教科書を読んでみてください。</p><h3 id=複素数の絶対値>複素数の絶対値</h3><p>実数で「絶対値」というものを考えたように、複素数にも「絶対値」の概念が存在します。複素数の絶対値の概念はマンデルブロ集合において重要な意味を持つので、ここで理解しておきましょう。</p><p>実数における絶対値は、「\(|-2|=2\)」や「\(|3|=3\)」、「\(|-\sqrt{2}|=\sqrt{2}\)」というように、数をすべて正の数にするような計算だとして覚えている人も多いと思います。しかし、あえて「符号を外す」とせずに、あくまで「原点からの距離」なんだという考え方を聞いたことがある人もいるのではないのでしょうか。絶対値を「原点からの距離」とする定義は、複素数の絶対値や別単元のベクトルの絶対値を考えるうえで有用です。</p><p>複素数平面において、複素数の絶対値を「原点からの距離」だとして考えてみましょう。 複素数\(1+2i\)と原点との距離\(|1+2i|\)は、先ほどの図より、三平方の定理を用いて求められます。 よって、\(|1+2i|=\sqrt{1^2+2^2}=\sqrt5\)となります。 より一般的に、複素数\(a+bi\)の絶対値は、\(|a+bi|=\sqrt{a^2+b^2}\)で求めることが出来ます。</p><h2 id=数列と漸化式数学bで学習とは>数列と漸化式(数学Bで学習)とは</h2><p>\({1,3,5,7,9,11,&mldr;}\)というような数の並びのことを「数列」と呼びます。この数列は1から始まり、2ずつ増えていくような数列(等差数列)です。このとき、数列の各要素を「項」といい、特に一番最初の項(この場合は1)を「初項」と呼びます。 数列は、\({a_n}={1,3,5,7,9,11,&mldr;}\)と表されることもあります。このとき、\(a_1\)は初項\(1\)を意味し、\(a_2\)と書けば2個目の項、すなわち\(3\)のことを意味します。</p><p>数列は先ほどのように各項を順番に一覧にして表すほかに、「一般項」を用いて表すことがあります。 先ほどの数列\({a_n}\)の一般項は\(a_n=2n-1\)です。一般項は\(n\)番目の項を\(n\)を用いて表すことが出来るように一般化した式のことで、一般項の\(n\)に任意の数を代入すれば、そのときの\(a_n\)の値を求めることが出来ます。</p><p>例えば、先ほどの数列\({a_n}\)の初項(1番目の項)は\(1\)でしたが、一般項\(a_n=2n-1\)に\(n=1\)を代入してみると、\(a_1=2\times1-1=2-1=1\)となり、実際に1番目の項を計算で求めることが出来るようになっています。</p><p>数列のもう一つの表し方が、「漸化式」を使う方法です。先ほどの数列\({a_n}\)を漸化式を用いて表すと以下のようになります。
\[
\begin{cases}
a_1=1\
a_{n+1}=a_n+2
\end{cases}
\]
漸化式は、\(n\)番目の項と\(n+1\)番目の項との関係性を式で表すことで数列を表す方法です(nとn+2、nとn+1とn+2など特殊なパターンもある)。 数列\({a_n}\)は項を重ねるごとに2ずつ増えていくので、\(a_{n+1}\)(\(n+1\)番目の項)はひとつ前の項\(a_n\)(\(n\)番目の項)よりも2大きくなります。それを式であらわしたのが2番目の式\(a_{n+1}=a_n+2\)です。この式だけではどの数字からスタートしてプラス2ずつ数えていくのかがわからないので、初項\(a_1=1\)の情報を追加しています。</p><p>これが漸化式です。</p><p>今回扱った\({a_n}\)のように、一般項を求めることが出来る漸化式もある一方で、ほとんどの漸化式は漸化式のまま計算せざるを得ず、一般項を求めることは困難です。一般項が分かっていれば、例えば100個目の項を求めたいときには一般項に100を代入して計算するだけで簡単に100個目の項を求めることが出来ますが、漸化式しか分かっていない数列で100個目の項を求めようとすると、漸化式に一つ前の項を代入して新しい項を求めていく計算を99回も繰り返さなくてはなりません。</p><h2 id=無限大の極限数学で学習について軽く解説>無限大の極限(数学Ⅲで学習)について軽く解説</h2><p>極限の考え方についてかる～～く解説します。</p><p>ちなみに、無限大ではなく0に近づける極限については数学Ⅱの微分法の単元で学習します。</p><p>極限の計算というのは、以下のようなものです。</p><p>\[\lim_{x\to\infty}{\frac{1}{x}}=0\]</p><p>limというのは英語の「limit」の略です。この計算では、\(x\)の値をどんどん大きくしていって、無限大まで大きくしていくと(\(x\to\infty\))、関数\(\frac{1}{x}\)の値はいくつになるのか、ということを考えています。</p><p>\(\frac{1}{1}\)は1ですよね。分母を少し大きくして、\(\frac{1}{2}\)は0.5です。さらに分母を大きくして、\(\frac{1}{10}\)は0.1となります。もっともっと分母を大きくして、例えば\(\frac{1}{1000}\)ではかなり小さくなって、0.001になります。同様にしてどんどん分母\(x\)を大きくして、無限大まで近づけていけば、\(\frac{1}{x}\)は次第にゼロになっていくだろう、というのが今回の計算の「雰囲気」です。</p><p>このようなとき、関数\(\frac{1}{x}\)は\(x\to\infty\)の極限で0に収束する、と言います。</p><p>逆に、</p><p>\[\lim_{x\to\infty}{\frac{x}{10000}}=\infty\]</p><p>というような計算では、はじめは\(\frac{x}{10000}\)の値は1よりも小さな数であるものの、次第に\({\frac{1000&mldr;..0000}{10000}}\)というように分子がどんどん大きくなっていくから、結局\(x\)が無限大まで大きくなってしまえば\(\frac{x}{10000}\)の値も無限大になるだろう、という風に考えます。</p><p>このようなときには、関数\(\frac{x}{10000}\)は\(x\to\infty\)の極限で無限大に発散する、と言います。</p><p>このように、普通の計算では扱えない、無限大のような数における関数の値を考えるのが、極限の考え方です。</p><h2 id=マンデルブロ集合の要素を調べる>マンデルブロ集合の要素を調べる</h2><p>さて、マンデルブロ集合の定義をもう一度正確に確認してみます。</p><blockquote><p>マンデルブロ集合は、以下の漸化式で表される複素数列\(Z_n\)の絶対値\(|Z_n|\)が\(n\to\infty\)の極限で無限大に発散しないような複素数\(C\)の集合 \[\begin {cases}Z_0 = 0 \\ Z_{n+1} = Z_n^2 + C\end {cases}\]</p></blockquote><p>つまり、ある複素数\(C\)がマンデルブロ集合に含まれるかどうかを調べるには、\(C\)を\(Z_n\)の漸化式にあてはめて、そのときに\(|Z_n|\)が無限大に発散するかしないかを調べればよさそうです。</p><h3 id=実際に漸化式に値を代入して計算する>実際に漸化式に値を代入して計算する</h3><p>試しに、\(C=0+0i(=0)\)という複素数がマンデルブロ集合に含まれるかを調べてみましょう。漸化式に代入すると</p><p>\[\begin {cases}Z_0 = 0 \\ Z_{n+1} = {Z_n}^2 + 0\end {cases}\]</p><p>実際に計算してみます。</p><p>\(Z_0=0, \\ Z_1={Z_0}^2+0=0^2+0=0, \\ Z_2={Z_1}^2+0=0, \\ Z_4=0,Z_5=0,Z_6=0,&mldr; \)</p><p>\(C=0\)のときは\(Z_n\)は明らかに常に\(0\)となり、これが発散することはなさそうです。ということで\(C=0\)はマンデルブロ集合に含まれるということが分かります。</p><p>\(C=1\)のときはどうでしょうか。漸化式に代入すると</p><p>\[\begin {cases}Z_0 = 0 \\ Z_{n+1} = {Z_n}^2 + 1\end {cases}\]</p><p>となり、実際に計算すると(ここからは実際の計算は省略します)\(Z_n = {0,1,2,5,26,677&mldr;}\)という風になりこれは恐らく発散します。</p><p>\(C=-1\)では\(Z_n={0,-1,0,-1,0,-1,&mldr;}\)となりこれは0と1の値を交互に取る(振動する)ので、収束することはあらねど無限大に発散することもありません。
このように、人間が見ればある程度は無限大に発散するかどうかを見分けることが可能ですが、コンピューターが大量の複素数について毎回判定するようなプログラムを書くことは困難です。また、今回は分かりやすい整数だったため発散の判定がしやすかったものの、実際のマンデルブロ集合には複素数も含まれており、さらにその実部、虚部の係数(\(Z=a+bi\)の\(a\)や\(b\)のこと)も細かい小数である場合がほとんどです。その場合の発散判定は困難を極めるでしょう。</p><h2 id=確実に発散することを判定する方法>「確実に発散する」ことを判定する方法</h2><p>しかし、ありがたいことに、\(|Z_n|>2\)となるような項が一つでも見つかった時点で、その数列\({Z_n}\)の絶対値はいずれ必ず無限大に発散する、ということが分かっています。この証明は少し長くなるで、興味のある方はこちらのメニューを開いて確認してください。計算は少々複雑ですが、やっていること自体は簡単です。</p><details><summary><p>証明(左のボタンで展開)</p></summary><p>\(n=k\)において、初めて\(|Z_n|>2\)になったとすると、三角不等式(\(|A+B| \geqq |A|-|B|\))より、
\(|Z_{k+1}|=|{Z_k}^2+C|\geqq|{Z_k}^2|-|C|\)となる。(漸化式より)
ここで、\(k=1\)のときは\(|Z_k|=|Z_1|=|0^2+C|=|C|\)、\(k>1\)のときは\(|Z_k|>2>|Z_1|=|C|\)となり、いずれにしても\(|Z_k|\geqq|C|\)となり、先ほどの式を書き換えていくと
\[\begin{align}
|Z_{k+1}|&\geqq|{Z_k}^2|-|C|\notag\
&\geqq|{Z_k}^2|-|Z_k|\notag\
&=|Z_k|(|Z_k|-1)\
&>|Z_k|\qquad(\because|Z_k|-1>1)\
&>2\notag
\end{align}\]
となる。同様にして(随所省略)、 \[\begin{align}
|Z_{k+2}|&\geqq|{{Z_{k+1}}^2}|-|C|\notag\
&>|Z_{k+1}|(|Z_{k+1}|-1)\notag\
&\geqq|Z_k|(|Z_k|-1)(|Z_{k+1}|-1)\qquad(\because(1))\notag\
&>|Z_k|(|Z_k|-1)(|Z_k|-1)\qquad(\because(2))\notag\
&=|Z_k|(|Z_k|-1)^2\notag
\end{align}\] これを繰り返すと、\(|Z_{k+3}|>|Z_k|(|Z_k|-1)^3\)、\(|Z_{k+4}|>|Z_k|(|Z_k|-1)^4\)、…となることがわかり、自然数\(m\)について
\[|Z_{k+m}|>|Z_k|(|Z_k|-1)^m\]
であることがわかる。 ここで、\(|Z_k|-1>1\)なので、\(k+m\to\infty\)すなわち\(m\to\infty\)のとき、
\[|Z_k|(|Z_k|-1)^m\to\infty\]
である。よって、\(|Z_k|>2\)となる\(k\)が存在するとき、
\[\lim_{n\to\infty}|Z_n|=\infty\]
となる。(証明終わり)
※<a href=https://twitter.com/Azicore>Azicore</a>様のウェブサイトを参考にしています。ありがとうございます！リンク：(<a href=https://azisava.sakura.ne.jp/mandelbrot/>https://azisava.sakura.ne.jp/mandelbrot/</a>)</p></details><p>なお、\(|C|>2\)の場合、\(Z_1=0^2+C=C>2\)となり、その時点で\(Z_n\)が発散することがわかります。そのため、マンデルブロ集合に含まれる複素数\(C\)は全て必ず\(|C|\leqq2\)となります。なので、マンデルブロ集合を調べる際には\(|C|\leqq2\)の範囲でのみ計算することが一般的です。</p><p>ということで、この性質により、マンデルブロ集合に含まれる(=無限大に発散しない)ことの判定はできないものの、マンデルブロ集合に含まれない(=無限大に発散する)ことの判定はそこそこ簡単にできるようになりました。\(Z_n\)を\(n\)がある程度の大きさになるまで計算してみて、それが2よりも大きくなれば確実に\(Z_n\)は無限大に発散するのだとわかります。</p><p>また、\(Z_n\)が発散しないことを調べるのも、少々強引ではありますが\(n\)をそこそこ大きな数にしても\(Z_n\)が2を超えないという場合に、その時はもはやずっと発散しないものと判断してしまえば、正確ではないものの近似的に「\(Z_n\)が発散しないような\(C\)の集合」、すなわちマンデルブロ集合を求めることが出来ます。</p><p>このときの「そこそこ大きな数」を「しきい値」と呼ぶことにし、\(n\)がしきい値になるまで\(Z_n\)を繰り返し計算し、その間に\(Z_n>2\)となれば発散判定、その間に\(Z_n>2\)を超えることが無ければ発散しなかったと判定することにします。</p><h2 id=描画プログラムを書く>描画プログラムを書く</h2><p>さて、先ほどの章で考えたアルゴリズムに基づいて、マンデルブロ集合を描画するプログラムを書いてみましょう。</p><p>今回は、WEB上でマンデルブロ集合を表示させたかったので、Javascriptを用います。なお、筆者は今回初めてJavascriptをコーディングしたため、あまり推奨されていないような書き方をしているところがあるかもしれませんが、ご承知おきください。</p><h3 id=入力された複素数がマンデルブロ集合に含まれるかどうかを判定する関数>入力された複素数がマンデルブロ集合に含まれるかどうかを判定する関数</h3><p>今回のキモはここがほとんどです。先ほどの章で考えたように、与えられた複素数\(C\)に対して数列\(Z_n\)が発散するかどうかを考え、\(C\)がマンデルブロ集合に含まれる(=発散しない)場合戻り値として<code>true</code>を返し、そうでない(=無限大に発散する)場合に<code>false</code>を返すような関数を作ります。</p><div><div class=codeblock-content><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>calculate</span>(<span style=color:#a6e22e>complex</span>,<span style=color:#a6e22e>threshold</span>){<span style=color:#75715e>//complex=複素数, threshold=しきい値
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>z</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>threshold</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>z</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>math</span>.<span style=color:#a6e22e>add</span>(<span style=color:#a6e22e>math</span>.<span style=color:#a6e22e>pow</span>(<span style=color:#a6e22e>z</span>,<span style=color:#ae81ff>2</span>),<span style=color:#a6e22e>complex</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>math</span>.<span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>z</span>)<span style=color:#f92672>&gt;</span><span style=color:#ae81ff>2</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>; <span style=color:#75715e>//発散する
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>; <span style=color:#75715e>//収束する
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}</span></span></code></pre></td></tr></table></div></div></div></div><p>今回、Javascript上で複素数を扱うため、<code>math.js</code>という外部ライブラリを使用しました(記事の終わりにリンクを掲載しています)。引数の<code>complex</code>には<code>math.j</code>sの複素数オブジェクトを入力する必要があります。</p><p>有名なプログラミング言語であれば、何かしら複素数など高度な数学を扱うことのできるライブラリは存在していると思います。PythonのNumPyなんかは有名ですよね。複素数の簡単な計算には四則演算以外は使用しないので、自分で実装しても問題ないでしょう。</p><p>また、引数<code>threshold</code>は先ほど定義した「しきい値」です。</p><p>書いたプログラムを解説していきます。</p><div><div class=codeblock-content><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>z</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;</span></span></code></pre></td></tr></table></div></div></div></div><p>ここでは初項\(Z_0=0\)を宣言しています。</p><div><div class=codeblock-content><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>threshold</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>z</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>math</span>.<span style=color:#a6e22e>add</span>(<span style=color:#a6e22e>math</span>.<span style=color:#a6e22e>pow</span>(<span style=color:#a6e22e>z</span>,<span style=color:#ae81ff>2</span>),<span style=color:#a6e22e>complex</span>);</span></span></code></pre></td></tr></table></div></div></div></div><p>forループを<code>threshold</code>回だけ回し、先ほど宣言した<code>z</code>に\(Z_{i+1}\)(このiはfor分が繰り返されるたびに1ずつ加算されるただのカウンタ変数。虚数単位ではない。)を代入しています。</p><p><code>math.add(a,b)</code>は<code>a+b</code>の計算、<code>math.pow(a,b)</code>は<code>a^b</code>の計算をそれぞれ行う、math.jsの関数です。このプログラムが漸化式\(Z_{n+1}={Z_n}^2+C\)を表していることが分かると思います。</p><div><div class=codeblock-content><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>math</span>.<span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>z</span>)<span style=color:#f92672>&gt;</span><span style=color:#ae81ff>2</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>; <span style=color:#75715e>//発散する
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>    }</span></span></code></pre></td></tr></table></div></div></div></div><p><code>math.abs(a)</code>は<code>a</code>の絶対値を求めるmath.jsの関数です。\(|Z_n|>2\)の場合に発散する判定を行う処理を行っています。発散する場合<code>complex</code>はマンデルブロ集合には含まれないので、戻り値として<code>false</code>を帰しています。</p><p>3行目の<code>break;</code>はforループを強制的に抜け出す処理です。発散することが明らかになった以上、さらに\(Z_n\)を求めていく必要はないためここで終了しています。</p><div><div class=codeblock-content><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;</span></span></code></pre></td></tr></table></div></div></div></div><p>しきい値まで\(Z_n\)を求めきった後、それでもまだ\(|Z_n|>2\)とならない場合、\(|Z_n|\)は発散しないと判断して戻り値<code>true</code>を返しています。</p><h3 id=描画したい範囲の全ての複素数についてマンデルブロ集合に含まれるかどうかを調べる>描画したい範囲の全ての複素数についてマンデルブロ集合に含まれるかどうかを調べる</h3><p>描画したい範囲の全ての複素数について、マンデルブロ集合に含まれるかどうかを今作った関数を用いて判定し、その結果(先ほどの関数で<code>true</code>もしくは<code>false</code>が返ってくる)を配列に保存しておくような関数を作ります。</p><div><div class=codeblock-content><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>mandelbrot</span>(<span style=color:#a6e22e>centerre</span>,<span style=color:#a6e22e>centerim</span>,<span style=color:#a6e22e>magnification</span>,<span style=color:#a6e22e>threshold</span>){
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//width,heightにはHTMLのcanvas要素の縦横ピクセル数を代入済み
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>width</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>height</span>){<span style=color:#75715e>//画面の縦幅に描画する集合の範囲の縦幅を合わせる
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>cpp</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>/</span><span style=color:#a6e22e>height</span><span style=color:#f92672>/</span><span style=color:#a6e22e>magnification</span>;<span style=color:#75715e>// 座標 per ピクセル
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>initre</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>centerre</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>cpp</span><span style=color:#f92672>*</span>(<span style=color:#a6e22e>width</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>initim</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>centerim</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>cpp</span><span style=color:#f92672>*</span>(<span style=color:#a6e22e>height</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span>{<span style=color:#75715e>//画面の横幅に描画する集合の範囲の横幅を合わせる
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>cpp</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>/</span><span style=color:#a6e22e>width</span><span style=color:#f92672>/</span><span style=color:#a6e22e>magnification</span>;<span style=color:#75715e>// 座標 per ピクセル
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>initre</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>centerre</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>cpp</span><span style=color:#f92672>*</span>(<span style=color:#a6e22e>width</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>initim</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>centerim</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>cpp</span><span style=color:#f92672>*</span>(<span style=color:#a6e22e>height</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>pos</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>width</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>man_set</span>.<span style=color:#a6e22e>push</span>([]);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>height</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>pos</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>math</span>.<span style=color:#a6e22e>complex</span>(
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>initre</span><span style=color:#f92672>+</span><span style=color:#a6e22e>cpp</span><span style=color:#f92672>*</span><span style=color:#a6e22e>i</span>,
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>initim</span><span style=color:#f92672>-</span><span style=color:#a6e22e>cpp</span><span style=color:#f92672>*</span><span style=color:#a6e22e>j</span>
</span></span><span style=display:flex><span>                );
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>universal_set</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>pos</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>man_set</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>calculate</span>(<span style=color:#a6e22e>pos</span>,<span style=color:#a6e22e>threshold</span>));
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}</span></span></code></pre></td></tr></table></div></div></div></div><p>画面の中心の複素数座標を指定することで描画範囲を指定するような仕様にしたかったため、そこから左上の座標を計算する必要ができコードがやや複雑になりました。
引数はそれぞれ<code>centerre</code>が中心部の座標の実部、<code>centerim</code>が中心部の座標の虚部、<code>magnification</code>が倍率、<code>threshold</code>が「しきい値」です。
それではこの関数も上から順に処理を説明していきます。</p><div><div class=codeblock-content><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>    <span style=color:#75715e>//width,heightにはHTMLのcanvas要素の縦横ピクセル数を代入済み
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>width</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>height</span>){<span style=color:#75715e>//画面の縦幅に描画する集合の範囲の縦幅を合わせる
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>cpp</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>/</span><span style=color:#a6e22e>height</span><span style=color:#f92672>/</span><span style=color:#a6e22e>magnification</span>;<span style=color:#75715e>// 座標 per ピクセル
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>initre</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>centerre</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>cpp</span><span style=color:#f92672>*</span>(<span style=color:#a6e22e>width</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>initim</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>centerim</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>cpp</span><span style=color:#f92672>*</span>(<span style=color:#a6e22e>height</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span>{<span style=color:#75715e>//画面の横幅に描画する集合の範囲の横幅を合わせる
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>cpp</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>/</span><span style=color:#a6e22e>width</span><span style=color:#f92672>/</span><span style=color:#a6e22e>magnification</span>;<span style=color:#75715e>// 座標 per ピクセル
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>initre</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>centerre</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>cpp</span><span style=color:#f92672>*</span>(<span style=color:#a6e22e>width</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>initim</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>centerim</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>cpp</span><span style=color:#f92672>*</span>(<span style=color:#a6e22e>height</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>    }</span></span></code></pre></td></tr></table></div></div></div></div><p>中心部の座標、描画先の画面(今回はHTMLのcanvas要素)の縦横の画素数、拡大倍率をもとに、描画先の画面の左上端の座標を計算しています。</p><p>マンデルブロ集合全体は(\(|Z_n|\leqq2\)なので)正方形の範囲に収まるため、画面が横長の場合は、画面の縦いっぱいに拡大して表示するようにし、それ以外、すなわち画面が縦長か正方形の場合は画面の横いっぱいに拡大して表示するよう場合分けしたうえで計算しています。</p><p>ここの計算は説明が面倒なのでプログラムを読める人は自力で解釈してください(すみません)。</p><div><div class=codeblock-content><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>pos</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>width</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>man_set</span>.<span style=color:#a6e22e>push</span>([]);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>height</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>pos</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>math</span>.<span style=color:#a6e22e>complex</span>(
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>initre</span><span style=color:#f92672>+</span><span style=color:#a6e22e>cpp</span><span style=color:#f92672>*</span><span style=color:#a6e22e>i</span>,
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>initim</span><span style=color:#f92672>-</span><span style=color:#a6e22e>cpp</span><span style=color:#f92672>*</span><span style=color:#a6e22e>j</span>
</span></span><span style=display:flex><span>                );
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>universal_set</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>pos</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>man_set</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>calculate</span>(<span style=color:#a6e22e>pos</span>,<span style=color:#a6e22e>threshold</span>));
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }</span></span></code></pre></td></tr></table></div></div></div></div><p>計算する座標を一時的に保存しておくため、変数<code>pos</code>をはじめに定義しています。</p><p>配列<code>man_set</code>は二次元配列です。二次元の平面である複素数平面と対応させています。</p><p>forループを二重に回しながら、ループ毎に<code>pos</code>に新しい複素数座標を代入し、先ほど定義したcalculate関数でその複素数がマンデルブロ集合に含まれるかどうかを調べ、結果を二次元配列<code>man_set</code>に<code>true</code>もしくは<code>false</code>の形で保存しています。</p><p>posに代入しているのはmath.jsの複素数オブジェクトです。</p><p>これで、配列<code>man_set</code>には画面の縦ピクセル数×横ピクセル数個の大量の複素数についてそれぞれ「マンデルブロ集合に含まれるかどうか」が保存されるようになります。</p><p>なお、<code>man_set</code>はこの関数の外でグローバル変数として既に定義しているので、あとで他の関数の中からでも呼び出すことが出来ます。</p><p>できればC++のポインタのような機能をつかって、参照渡しのようなものを実現したかったです。おそらくなにか方法はあるのでしょう…。調べてみると「Javascriptには参照渡しも値渡しも存在しない」だの「参照の値渡しである」だのという記述があり、余計わからなくなりました。</p><h3 id=指定範囲のマンデルブロ集合を保存した配列を実際に描画する>指定範囲のマンデルブロ集合を保存した配列を実際に描画する</h3><p>ここからはもう簡単です。先ほど、配列<code>man_set</code>に描画先画面の全画素に対応する各複素数がマンデルブロ集合に含まれるかどうかを保存したので、あとはその配列全体を読んで、1ピクセルずつ色を塗っていくような関数を作るだけです。</p><div><div class=codeblock-content><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>canvas</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#34;canvas&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ctx</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>canvas</span>.<span style=color:#a6e22e>getContext</span>(<span style=color:#e6db74>&#34;2d&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw_set</span>(<span style=color:#a6e22e>set</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>width</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>height</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>set</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>]){
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>fillRect</span>(<span style=color:#a6e22e>i</span>,<span style=color:#a6e22e>j</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}</span></span></code></pre></td></tr></table></div></div></div></div><p>上から説明していきます。</p><div><div class=codeblock-content><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>canvas</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#34;canvas&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ctx</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>canvas</span>.<span style=color:#a6e22e>getContext</span>(<span style=color:#e6db74>&#34;2d&#34;</span>);</span></span></code></pre></td></tr></table></div></div></div></div><p>描画先のcanvas(“canvas”というIDを設定済み)を指定し、そのcanvasに対して描画をするためのコンテキストというものを取得しています。詳しくはよくわかりません…。標準で用意されているcanvasへの描画用のAPIのようなものだと思います。</p><div><div class=codeblock-content><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw_set</span>(<span style=color:#a6e22e>set</span>){
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>fillStyle</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;black&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>width</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>height</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>set</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>]){
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>fillRect</span>(<span style=color:#a6e22e>i</span>,<span style=color:#a6e22e>j</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}</span></span></code></pre></td></tr></table></div></div></div></div><p>引数<code>set</code>には二次元配列<code>man_set</code>を与えます。<code>fillStyle</code>では描画色を設定しています。
あとはforループを二重に回し、<code>fillRect()</code>という関数で指定した座標にひとつづつ点を打つだけです。</p><h3 id=仕上げのプログラム>仕上げのプログラム</h3><p>ここまでに用意した三つの関数を使って、実際に画面に描画するまでの処理を行う関数を作ります。</p><div><div class=codeblock-content><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>(<span style=color:#a6e22e>set</span>){
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>clearRect</span>(<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>800</span>,<span style=color:#ae81ff>800</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>strokeStyle</span> <span style=color:#f92672>=</span> (<span style=color:#e6db74>&#34;black&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>lineWidth</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>strokeRect</span>(<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#a6e22e>canvas</span>.<span style=color:#a6e22e>width</span>,<span style=color:#a6e22e>canvas</span>.<span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>draw_set</span>(<span style=color:#a6e22e>man_set</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>init</span>(){
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>canvas</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>=</span> window.<span style=color:#a6e22e>innerWidth</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>canvas</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>=</span> window.<span style=color:#a6e22e>innerHeight</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>width</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>canvas</span>.<span style=color:#a6e22e>width</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>height</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>canvas</span>.<span style=color:#a6e22e>height</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mandelbrot</span>(<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>30</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>draw</span>(<span style=color:#a6e22e>man_set</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>window.<span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#34;load&#34;</span>,<span style=color:#a6e22e>init</span>);</span></span></code></pre></td></tr></table></div></div></div></div><p>上から説明していきます。</p><div><div class=codeblock-content><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>(<span style=color:#a6e22e>set</span>){
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>clearRect</span>(<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>800</span>,<span style=color:#ae81ff>800</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>strokeStyle</span> <span style=color:#f92672>=</span> (<span style=color:#e6db74>&#34;black&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>lineWidth</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ctx</span>.<span style=color:#a6e22e>strokeRect</span>(<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#a6e22e>canvas</span>.<span style=color:#a6e22e>width</span>,<span style=color:#a6e22e>canvas</span>.<span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>draw_set</span>(<span style=color:#a6e22e>man_set</span>);
</span></span><span style=display:flex><span>}</span></span></code></pre></td></tr></table></div></div></div></div><p>必要ないかもしれませんが、マンデルブロ集合を描画する作業や枠線を描く作業などを一括で行う関数を作っておきました。座標軸を描き加えたりする場合には、ここにそのような処理を書き足すようにしようと思っています。
引数<code>set</code>には、マンデルブロ集合を保存した配列、<code>man_set</code>を渡して使用します。</p><div><div class=codeblock-content><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>init</span>(){
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>canvas</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>=</span> window.<span style=color:#a6e22e>innerWidth</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>canvas</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>=</span> window.<span style=color:#a6e22e>innerHeight</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>width</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>canvas</span>.<span style=color:#a6e22e>width</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>height</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>canvas</span>.<span style=color:#a6e22e>height</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mandelbrot</span>(<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>30</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>draw</span>(<span style=color:#a6e22e>man_set</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>window.<span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#34;load&#34;</span>,<span style=color:#a6e22e>init</span>);</span></span></code></pre></td></tr></table></div></div></div></div><p><code>init()</code>関数は、WEBページが読み込まれたとき、一番最初に一度だけ実行される関数です。<code>window.addEventListener("load",init)</code>というところで、そのことを指定しています。
init関数の中で<code>canvas.width</code>及び<code>canvas.height</code>にWEBページの画面サイズを代入し、画面いっぱいにcanvasの要素を広げて表示するようにしています。変数<code>width</code>及び<code>height</code>にも、画面のサイズを代入し直しています。
そして、先ほど定義した<code>mandelbrot()</code>関数で、マンデルブロ集合を保存した配列を作成します。今回は、引数に、中心の座標(0,0)、倍率(1倍)、発散判定を行うときの「しきい値」(30回)を指定して計算しています。
最後に、前項で定義したばかりの<code>draw()</code>関数に、マンデルブロ集合を保存した配列<code>man_set</code>を渡し、マンデルブロ集合を描画して完了となります。</p><h3 id=実際に動かしてみる>実際に動かしてみる</h3>ここまでに書いたJavascriptのコードを`script.js`などの名前で保存し、以下のようなHTMLファイルを新たに作成します。<div><div class=codeblock-content><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#75715e>&lt;!DOCTYPE html&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>html</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>canvas</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;canvas&#34;</span> <span style=color:#a6e22e>width</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;100%&#34;</span> <span style=color:#a6e22e>height</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;100%&#34;</span>&gt;&lt;/<span style=color:#f92672>canvas</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text/javascript&#34;</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;math.js&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text/javascript&#34;</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;script.js&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>html</span>&gt;</span></span></code></pre></td></tr></table></div></div></div></div><p>実際は<code>&amp;lt;link&amp;gt;</code>要素でCSSを適用したりしていますが、最低限これだけのHTMLが書かれていれば、先ほどのJavascriptコードでマンデルブロ集合を描画することが出来ます。
以下の画面で実際に描画プログラムを動かしているのでご確認ください。なお、ここではブログに埋め込むため一部を書き換えています。</p><p><canvas width=100px height=200px id=canvas></canvas></p><script type=text/javascript src=https://cdnjs.cloudflare.com/ajax/libs/mathjs/10.5.3/math.js></script>
<script type=text/javascript src=./script.js></script><h2 id=おわりに次回予告>おわりに・次回予告</h2><p>最後まで読んでいただきありがとうございました！
次回は、マンデルブロ集合描画の高速化と、画像の着色をやってみようと思っています。実現するかはわかりませんが、お楽しみに。</p><h2 id=参考文献>参考文献</h2><ul><li><a href=https://ja.wikipedia.org/wiki/%E3%83%9E%E3%83%B3%E3%83%87%E3%83%AB%E3%83%96%E3%83%AD%E9%9B%86%E5%90%88>Wikipedia日本語版「マンデルブロ集合」</a></li><li><a href=https://azisava.sakura.ne.jp/mandelbrot/>「マンデルブロ集合の不思議な世界」(Azicoreさんのブログ)</a></li></ul><h2 id=その他のリンク>その他のリンク</h2><ul><li><a href=https://mathjs.org/>Math.js(今回使用したJavascriptのライブラリ)</a></li></ul></article><span class=next>次へ<a href=https://asanobuturi.github.io/blog/20220619/>物理部の歴史を探る＞</a></span><br><span class=prev>前へ<a href=https://asanobuturi.github.io/blog/20190306/>AviUtlについて、導入など＞</a></span></div><aside id=sidebar><nav id=sidemenu><div class=side-back><a href=../index.html>記事の一覧へもどる<img src=/image/icons/sign-out-alt-solid.svg class=inline-image></a></div><div class=side-next><a href=https://asanobuturi.github.io/blog/20220619/><img src=/image/icons/angle-left-solid.svg class=inline-image>物理部の歴史を探る</a></div><div class=side-prev><a href=https://asanobuturi.github.io/blog/20190306/>AviUtlについて、導入など<img src=/image/icons/angle-right-solid.svg class=inline-image></a></div></nav><section id=indexblock><header class=indextitle>目次</header><nav id=TableOfContents><ul><li><a href=#はじめに>はじめに</a></li><li><a href=#対象読者>対象読者</a></li><li><a href=#マンデルブロ集合とは>マンデルブロ集合とは</a><ul><li></li></ul></li><li><a href=#複素数数学で学習とは>複素数(数学Ⅱで学習)とは</a><ul><li><a href=#虚数の定義>虚数の定義</a></li><li><a href=#複素数の定義>複素数の定義</a></li></ul></li><li><a href=#複素数平面数学で学習とは>複素数平面(数学Ⅲで学習)とは</a><ul><li><a href=#複素数の絶対値>複素数の絶対値</a></li></ul></li><li><a href=#数列と漸化式数学bで学習とは>数列と漸化式(数学Bで学習)とは</a></li><li><a href=#無限大の極限数学で学習について軽く解説>無限大の極限(数学Ⅲで学習)について軽く解説</a></li><li><a href=#マンデルブロ集合の要素を調べる>マンデルブロ集合の要素を調べる</a><ul><li><a href=#実際に漸化式に値を代入して計算する>実際に漸化式に値を代入して計算する</a></li></ul></li><li><a href=#確実に発散することを判定する方法>「確実に発散する」ことを判定する方法</a></li><li><a href=#描画プログラムを書く>描画プログラムを書く</a><ul><li><a href=#入力された複素数がマンデルブロ集合に含まれるかどうかを判定する関数>入力された複素数がマンデルブロ集合に含まれるかどうかを判定する関数</a></li><li><a href=#描画したい範囲の全ての複素数についてマンデルブロ集合に含まれるかどうかを調べる>描画したい範囲の全ての複素数についてマンデルブロ集合に含まれるかどうかを調べる</a></li><li><a href=#指定範囲のマンデルブロ集合を保存した配列を実際に描画する>指定範囲のマンデルブロ集合を保存した配列を実際に描画する</a></li><li><a href=#仕上げのプログラム>仕上げのプログラム</a></li></ul></li><li><a href=#おわりに次回予告>おわりに・次回予告</a></li><li><a href=#参考文献>参考文献</a></li><li><a href=#その他のリンク>その他のリンク</a></li></ul></nav></section></aside></main><footer id=footer><div class=section><nav class=grid><div><label class=headline>CONTENT</label><ul><li><a href=/>Home</a></li><li><a href=/document/>Docs</a></li><li><a href=/game/>Games</a></li><li><a href=/blog/>Blog</a></li><li><a href=/electronic/>Electronic</a></li></ul></div><div><label class=headline>CONTACT</label><ul><li><a target=_blank href=https://x.com/Uchi54_apc>X</a></li><li><a target=_blank href=https://github.com/asanobuturi>GitHub Organization</a></li><li><a target=_blank href=https://github.com/asanobuturi/asanobuturi.github.io>Repository</a></li><li><a target=_blank href=https://github.com/asanobuturi/asanobuturi.github.io/issues>Issues</a></li></ul></div><div><label class=headline>ABOUT</label><ul><li><a href=/about/>About Us</a></li></ul></div></nav></div><hr><div class=section><p class=copyright>Copyright &copy; 2015 - 2023 Asano Physics Club, All Rights Reversed.</p><nav class=sns><a target=_blank href=https://twitter.com/Uchi54_apc><svg xmlns="http://www.w3.org/2000/svg" fill="currentcolor" viewBox="0 0 248 204"><path d="M221.95 51.29c.15 2.17.15 4.34.15 6.53.0 66.73-50.8 143.69-143.69 143.69v-.04c-27.44.04-54.31-7.82-77.41-22.64 3.99.48 8 .72 12.02.73 22.74.02 44.83-7.61 62.72-21.66-21.61-.41-40.56-14.5-47.18-35.07 7.57 1.46 15.37 1.16 22.8-.87-23.56-4.76-40.51-25.46-40.51-49.5v-.64c7.02 3.91 14.88 6.08 22.92 6.32C11.58 63.31 4.74 33.79 18.14 10.71c25.64 31.55 63.47 50.73 104.08 52.76-4.07-17.54 1.49-35.92 14.61-48.25 20.34-19.12 52.33-18.14 71.45 2.19 11.31-2.23 22.15-6.38 32.07-12.26-3.77 11.69-11.66 21.62-22.2 27.93 10.01-1.18 19.79-3.86 29-7.95-6.78 10.16-15.32 19.01-25.2 26.16z"/></svg></a><a target=_blank href=https://github.com/asanobuturi><svg class="w-5 h-5" fill="currentcolor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483.0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951.0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65.0.0.84-.27 2.75 1.026A9.564 9.564.0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688.0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855.0 1.338-.012 2.419-.012 2.747.0.268.18.58.688.482A10.019 10.019.0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"/></a></nav></div></footer></body></html>