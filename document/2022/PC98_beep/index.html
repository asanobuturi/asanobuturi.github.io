<!DOCTYPE html>
<html lang="ja">
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-115439668-1"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
          dataLayer.push(arguments);
      }
      gtag('js', new Date());
      gtag('config', 'UA-115439668-1');
  </script>

  <meta property="og:url" content="https://asanobuturi.github.io/document/2022/PC98_beep/index.html"/>
  <meta property="og:title" content="PC98という古いPCで曲をビープ音で演奏してみた|浅野学園物理部"/>
  <meta property="og:description" content=""/>
  <meta property="og:type" content="website"/>
  <meta property="og:image" content="https://asanobuturi.github.io/document/2022/PC98_beep/thumbnail.jpg"/><!--ここまでOGP設定-->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@Uchi54_APC" /> <!--ここまでTwitterカード設定-->

  <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-MML-AM_CHTML' async></script><!--MathJax適用(LaTeX数式表示用)-->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <meta name="description" content="文化祭で展示していたPC98曲演奏について語ります" />

  <title>PC98という古いPCで曲をビープ音で演奏してみた|浅野学園物理部</title>

  <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>

  <link rel="stylesheet" href="https://asanobuturi.github.io/styles.css">
  <link rel="stylesheet" href="https://asanobuturi.github.io/blog_new.css">
  <link rel="stylesheet" href="https://asanobuturi.github.io/highlight.css"><!--シンタックスハイライト-->
  <link rel="shortcut icon" href="https://asanobuturi.github.io/image/favicon.ico">

  <script type="text/javascript" src="//typesquare.com/accessor/script/typesquare.js?YME8OdI00sA%3D" charset="utf-8"></script>
  <script src="https://kit.fontawesome.com/1e291c4f9b.js" crossorigin="anonymous"></script>

</head>
<body>
  <div id="nav-drawer">
  </div>
  <main>
    <div id="main">
        <div class="documentcontent"><article>
            <div id="breadcrumbs">
            </div>
            <header class="documenttitle">
                <h1 id="title"></h1>
                <p class="author"></p>
                <a href="https://twitter.com/intent/tweet?url=https://asanobuturi.github.io/document/2022/PC98_beep/index.html&text=PC98という古いPCで曲をビープ音で演奏してみた|浅野学園物理部&via=Uchi54_APC&related=Uchi54_APC" class="twitter-share-button" data-show-count="false">Tweet</a>
                <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><!--Twitterのシェアボタンの中身(URL・記事タイトル)も記述すること-->
            </header>
            <div class="document">
              <h2 id="はじめに">はじめに</h2>
              <p>皆さんこんにちは高2のN.Kです。今回はPC98で曲を演奏するという内容なのですがこの記事を書こうと思った理由の中に後輩へ技術を継承するということがあります。というのもPC98を扱える部員が私の4個上の代で途絶えており、私がこの企画をやるのに苦労したからです。もしかしたら後輩がPC98を扱うかもしれないのでしっかりと文章で書いておこうと思います。(いつまで部にあるPC98がもつのかわかりませんが…)</p>
              <h2 id="pc98とは">PC98とは</h2>
              <p>物理部の文化祭に来てくださるのは小学生が多いので一応軽くPC98の説明をしておきます。
              PC98とはNECが1982年から2003年まで製造・販売を行っていたパソコンのシリーズである「PC-9800」の略称です。
              今回使っていくのは1995年発売の<a
              href="https://support.nec-lavie.jp/support/product/data/spec/cpu/95110024-1.html">PC9821Xa10</a>という機種で本体標準価格税別268000円だそうです。当時のPCの高価さがうかがえます。</p>
              <p><img src="yhXmUyS.jpg" width="500" /></p>
              <h2
              id="pc98でのプログラミング">PC98でのプログラミング</h2>
              <p>今回はC言語というプログラミング言語を、統合開発環境はTurboC++4.0を使っていきます。
              統合開発環境とはテキストエディタやプログラミング言語を機械語に変換するコンパイラなどの機能を含むソフトウェア開発のための統合的なプログラミング環境のことでTurboC++は1987年にボーランド社から発売されたTurboCの後継である統合開発環境で今回使うver4.0は1995年に発売されました。</p>
              <p><img src="3hMrayZ.jpg" width="400" /></p>
              <h2 id="pc98での操作">PC98での操作</h2>
              <p>PC98のOSはMicrosoftが開発したMS-DOSとなっており、基本的にはCUIと呼ばれる文字列でコンピュータに指示を与えてディスプレイに文字を表示して応答するUIとなっています。
              基本操作はWindowsのコマンドプロンプトと変わらないのでそこまで難しくないです。
              物理部のPC98にはFILMTNというフリーのファイルマネージャが入っているので案外コマンドを入力しなくても何とかなります。</p>
              <p><img src="FnvF9Jb.jpg" width="400" /></p>
              <h2 id="日本語入力">日本語入力</h2>
              <p>日本語入力にはATOKというIMEを使います。入力中にXFER+CTRLを押すことで日本語入力になります。F7でカタカナなど後の操作は基本的に今と変わりません。</p>
              <p><img src="C7pAi43.jpg" width="500" /></p>
              <h2 id="実際にコードを書く">実際にコードを書く</h2>
              <p>IDEを起動してコードを書いていきます。ここから先はソースコードの一部を公開して、解説していこうと思います。<br />
              ビープ音の高さは周波数で指定するので周波数と音階を対応させています。
              長さはミリ秒で指定するので同様にミリ秒と音符の長さを対応させています。</p>
              <div class="sourceCode" id="cb1"><pre
              class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">//音階</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">int</span> A <span class="op">=</span> <span class="dv">440</span><span class="op">;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">int</span> AF <span class="op">=</span> <span class="dv">415</span><span class="op">;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">int</span> AS <span class="op">=</span> BF<span class="op">;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">int</span> B <span class="op">=</span> <span class="dv">494</span><span class="op">;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">int</span> BF <span class="op">=</span> <span class="dv">466</span><span class="op">;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">int</span> C <span class="op">=</span> <span class="dv">262</span><span class="op">;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">int</span> CS <span class="op">=</span> DF<span class="op">;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">int</span> D <span class="op">=</span> <span class="dv">294</span><span class="op">;</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">int</span> DF <span class="op">=</span> <span class="dv">277</span><span class="op">;</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">int</span> DS <span class="op">=</span> EF<span class="op">;</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">int</span> E <span class="op">=</span> <span class="dv">330</span><span class="op">;</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">int</span> EF <span class="op">=</span> <span class="dv">311</span><span class="op">;</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">int</span> F <span class="op">=</span> <span class="dv">349</span><span class="op">;</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">int</span> FS <span class="op">=</span> GF<span class="op">;</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">int</span> G <span class="op">=</span> <span class="dv">392</span><span class="op">;</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">int</span> GF <span class="op">=</span> <span class="dv">370</span><span class="op">;</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">int</span> GS <span class="op">=</span> AF<span class="op">;</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="co">//音符</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">int</span> eight <span class="op">=</span> sixteen<span class="op">*</span><span class="dv">2</span><span class="op">;</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">int</span> four <span class="op">=</span> eight<span class="op">*</span><span class="dv">2</span><span class="op">;</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">int</span> one <span class="op">=</span> two<span class="op">*</span><span class="dv">2</span><span class="op">;</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">int</span> sixteen <span class="op">=</span> <span class="dv">125</span><span class="op">;</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">int</span> two <span class="op">=</span> four<span class="op">*</span><span class="dv">2</span><span class="op">;</span></span></code></pre></div>
              <p>その次は音声再生用の関数を作ります。<code>playmsg(音符,歌詞,音階,音程)</code>で歌詞つきで音符を再生します。<code>play()</code>はそれの歌詞なし版です。</p>
              <div class="sourceCode" id="cb2"><pre
              class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> playmsg<span class="op">(</span><span class="dt">int</span> ms<span class="op">,</span> <span class="at">const</span> <span class="dt">char</span> <span class="op">*</span>msg<span class="op">,</span> <span class="dt">int</span> code<span class="op">,</span> <span class="dt">int</span> ontei <span class="op">=</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  cout <span class="op">&lt;&lt;</span> msg<span class="op">;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  sound<span class="op">(</span>code <span class="op">*</span> ontei<span class="op">);</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  delay<span class="op">(</span>ms<span class="op">);</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  nosound<span class="op">();</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> play<span class="op">(</span><span class="dt">int</span> ms<span class="op">,</span> <span class="dt">int</span> code<span class="op">,</span> <span class="dt">int</span> ontei <span class="op">=</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  playmsg<span class="op">(</span>ms<span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">,</span> code<span class="op">,</span> ontei<span class="op">);</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
              <p>あとはひたすらこれを使って音を鳴らしていくだけです。
              <code>!(kbhit()&amp;&amp;getch() == 'q')</code>の部分でもしQが押されたら終了するようにしています。
              <code>kbhit()</code>は何かキーが押されたら0以外の数値を返しバッファにキー情報が入ります。それを<code>getch()</code>で受け取ってそのキーがqであったらループを抜けるようにしています。</p>
              <div class="sourceCode" id="cb3"><pre
              class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span><span class="op">(!(</span>kbhit<span class="op">()&amp;&amp;</span>getch<span class="op">()</span> <span class="op">==</span> <span class="ch">&#39;q&#39;</span><span class="op">)){</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  system<span class="op">(</span><span class="st">&quot;cls&quot;</span><span class="op">);</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  cout <span class="op">&lt;&lt;</span> endl <span class="op">&lt;&lt;</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;        ミックスナッツを再生中...&quot;</span> <span class="op">&lt;&lt;</span> endl<span class="op">;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  delay<span class="op">(</span><span class="dv">500</span><span class="op">);</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  nextline<span class="op">();</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">goto</span> start<span class="op">;</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  start<span class="op">:</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  playmsg<span class="op">(</span>eight<span class="op">,</span><span class="st">&quot;袋&quot;</span><span class="op">,</span>BF<span class="op">);</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  play<span class="op">(</span>eight<span class="op">,</span>BF<span class="op">);</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  play<span class="op">(</span>eight<span class="op">,</span>BF<span class="op">);</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  playmsg<span class="op">(</span>eight<span class="op">,</span><span class="st">&quot;に&quot;</span><span class="op">,</span>BF<span class="op">);</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  playmsg<span class="op">(</span>eight<span class="op">,</span><span class="st">&quot;詰&quot;</span><span class="op">,</span>B<span class="op">);</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  playmsg<span class="op">(</span>eight<span class="op">,</span><span class="st">&quot;め&quot;</span><span class="op">,</span>DF<span class="op">,</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  playmsg<span class="op">(</span>eight<span class="op">,</span><span class="st">&quot;ら&quot;</span><span class="op">,</span>EF<span class="op">,</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  playmsg<span class="op">(</span>eight<span class="op">,</span><span class="st">&quot;れ&quot;</span><span class="op">,</span>DF<span class="op">,</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  delay<span class="op">(</span>eight<span class="op">);</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  playmsg<span class="op">(</span>four<span class="op">,</span><span class="st">&quot;た&quot;</span><span class="op">,</span>AF<span class="op">,</span><span class="dv">2</span><span class="op">);</span></span></code></pre></div>
              <h2 id="おわりに">おわりに</h2>
              <p>文化祭で展示した作品を軽く解説してみました。もう一つPC98の部誌を書いているのでそちらも見ていただけるとありがたいです。今後PC98を後輩が引き継いでくれるのかどうかわかりませんが引き継いでくれたらうれしいですね。ここまで読んでくださりありがとうございました。</p>
            </div>
            <nav class="nextPrev">
            </nav>
        </article></div>
        <nav id="sidebar">
            <div id="sidemenu">
            </div>
            <div id="indexblock">
                <div class="indextitle">目次</div>
                <ol class="indexcontents">
                    <ul>
                    <li><a href="#はじめに"
                    id="toc-はじめに">はじめに</a></li>
                    <li><a href="#pc98とは"
                    id="toc-pc98とは">PC98とは</a></li>
                    <li><a href="#pc98でのプログラミング"
                    id="toc-pc98でのプログラミング">PC98でのプログラミング</a></li>
                    <li><a href="#pc98での操作"
                    id="toc-pc98での操作">PC98での操作</a></li>
                    <li><a href="#日本語入力"
                    id="toc-日本語入力">日本語入力</a></li>
                    <li><a href="#実際にコードを書く"
                    id="toc-実際にコードを書く">実際にコードを書く</a></li>
                    <li><a href="#おわりに"
                    id="toc-おわりに">おわりに</a></li>
                    </ul>
                </ol>
            </div>
        </nav>
    </div>
    <footer class="footer">
        <div class="">
            <p class="copylight">&copy; 2015-2022 Asano Physics Club</p>
        </div>
    </footer>
</main>
<script type="text/javascript" src="/general.js"></script>
<script type="text/javascript" src="../document.js"></script>
</body>
</html>
