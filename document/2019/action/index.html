<!doctype html><html lang=ja><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115439668-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-115439668-1');</script><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=description content="アクションゲームのブロックの当たり判定について"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/styles.css><link rel=stylesheet href=/highlight.css><link rel=icon href=/image/favicon.svg type=image/svg+xml><link rel="icon alternate" href=/images/favicon.ico><meta property="og:site_name" content="浅野学園物理部"><meta property="og:url" content="https://asanobuturi.github.io/document/2019/action/index.html"><meta property="og:title" content="アクションゲームのブロックの当たり判定｜浅野学園物理部"><meta property="og:description" content="アクションゲームのブロックの当たり判定について"><meta property="og:type" content="website"><meta property="og:image" content="https://asanobuturi.github.io/thumbnails/document/2019/action/thumbnail.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@Uchi54_APC"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@500;700&display=swap" rel=stylesheet></head><link rel=stylesheet href=/blog_new.css><link rel=stylesheet href=/highlight.css><script src=https://kit.fontawesome.com/1e291c4f9b.js crossorigin=anonymous></script><title>アクションゲームのブロックの当たり判定｜浅野学園物理部</title><script type=text/javascript async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_CHTML"></script><body><div id=nav-drawer><input id=nav-input type=checkbox class=nav-unshown>
<label id=nav-open for=nav-input><span class="bar bar1"></span><span class="bar bar2"></span><span class="bar bar3"></span><span class=menu>MENU</span>
<span class=close>CLOSE</span></label>
<label id=nav-close for=nav-input></label><div id=nav-content><a href=/index.html><img src=/image/MenuBarLogo.webp id=nav-logo alt=浅野学園物理部></a>
<a class=nav-link href=/index.html>ホーム</a>
<a class=nav-link href=/about/index.html>物理部とは</a>
<a class="nav-link isActive" href=/document/index.html>部誌</a>
<a class=nav-link href=/game/index.html>ゲーム</a>
<a class=nav-link href=/blog/index.html>ブログ</a>
<a class=nav-link href=/electronic/index.html>電工の部屋</a><div class=nav-separator></div><a class=nav-link href=http://d.hatena.ne.jp/apc/>ブログ(外部サイト)</a></div></div><main><div id=main><div class=documentcontent><div id=breadcrumbs><i class="fas fa-home"></i><a href=/index.html>ホーム</a>
<i class="fas fa-angle-right"></i><a href=../../index.html>部誌</a>
<i class="fas fa-angle-right"></i><a href=../index.html>2019年度部誌</a>
<i class="fas fa-angle-right"></i><a href=./index.html>アクションゲームのブロックの当たり判定</a></div><header class=documenttitle><h1 id=title>アクションゲームのブロックの当たり判定</h1><p class=author><i class="fas fa-user-edit"></i>S.K.</p><a href="https://twitter.com/intent/tweet?text=%e3%82%a2%e3%82%af%e3%82%b7%e3%83%a7%e3%83%b3%e3%82%b2%e3%83%bc%e3%83%a0%e3%81%ae%e3%83%96%e3%83%ad%e3%83%83%e3%82%af%e3%81%ae%e5%bd%93%e3%81%9f%e3%82%8a%e5%88%a4%e5%ae%9a&via=Uchi54_APC&related=Uchi54_APC" class=twitter-share-button data-show-count=false>ツイート</a>
<script async src=https://platform.twitter.com/widgets.js></script></header><div class=document><p class=kome>注意！この私の部誌は日本語がおかしいところが多々ありますのでご注意ください。</p><h2 id=ゲームはフレームごとに処理されている>ゲームはフレームごとに処理されている</h2><p>この部誌を読んでいるみなさん、こんにちは！突然ですが皆さんは「ゲームはフレームごとに処理されている」ということを知っていますか?</p><p>「フレームってなんぞや?」と思うかもしれませんが、実はビデオゲームというのはパラパラ漫画のように素早く画面が切り替わって、1画面ずつゲームの処理が行われているのです。この一画面をフレームと言い、一秒間にフレームがいくつ切り替わるかの値をFPSという単位で表します。ディスプレイの性能の関係で、大抵のゲームは60FPSか30FPSで動作するように設計しますが、処理が追いつかなくなるとまれに遅れることもあります。</p><p>それではこの1フレームの間にどのようなことが起こっているかの具体例をあげましょう。例えば某マ○オの移動です。実際は素早くフレームが切り替わっているのでなめらかに移動しているように見えますが、実は一枚一枚はただの静止画なのです!</p><p>どういうことかを理解するために、まずは右の図を見てください。例えば、一枚目のフレームでプレイヤーがAの位置に、二枚目のフレームでプレイヤーがBのいちに居た場合には、画面の前ではプレイヤーが左から右へなめらかに移動しているように見えるのです。</p><p><img src=./image1.webp class=caption> 図1</p><h2 id=プレイヤーとブロックの当たり判定>プレイヤーとブロックの当たり判定</h2><p>ここからが本題です。この章では「プレイヤーとブロックの当たり判定」について説明します。そもそも、当たり判定とはなにかわかりますか?簡単に言えば、ゲームの中にある何かと、また何かとが当たっている(触れている)かどうかの判定です。</p><p>この技術を使えば、例えばアイテムとプレイヤーが当たっているかを判定して、当たっていた場合にアイテムが消えてプレイヤーが回復したりなどの動作を実装することができます。</p><p>これは<span class=text-bold>ただ触れているかどうかだけ</span>を調べればいいので簡単です。ですがマ○オとブロックの当たり判定となるとそう簡単にはいきません。なぜかというと、「マ○オがブロックに対してどちらの方向から当たったのか」まで調べなくてはならないからです。</p><p>どうしてこのようなことを調べなくてはいけないのでしょうか。それはブロックに当たったときにその当たってきた方向に戻さなくてはならないからです。ここで戻さなければ、マ○オはプレイヤーがその方向の操作をやめるまでずっとブロックにめり込み続けてしまいます。</p><p>例えば、図2のように上から当たってきたのなら上に戻し、また左からなら図3のように左に戻します。</p><p><img src=./image2.webp class=caption> 図2</p><p><img src=./image3.webp class=caption> 図3</p><p>ということで、「どの方向からブロックに当たったのか」を調べなければいけないのですが、これが難しいのです。この調べ方は色々ありますが、私は次のような方法で調べています。</p><p>図4を見てください。</p><p><img src=./image4.webp class=caption> 図4</p><p>この図を1ブロックだと思ってください。まずこのようにブロックを分けて考えます。(ブロックの見た目を変えるわけではありません。図の中でわかりやすいように変更しているだけです。)まずブロック全体ではなく灰色の部分だけに重点を置いてあたりを調べます。そして触れていた場合には、プレイヤーが上へ移動している途中なら図5のように下に戻し、</p><p><img src=./image5.webp class=caption> 図5</p><p>図6のように下に移動しているか、または当たっているのに動きは止まっているという場合には下へ戻します。</p><p><img src=./image6.webp class=caption> 図6</p><p>内側の灰色には触れておらず、右側の黒色に触れているなら図7のように右へ戻し、左なら図8のように左へ戻します。</p><p><img src=./image7.webp clas=caption> 図7
<img src=./image8.webp class=caption> 図8</p><p>と、言う仕組みです。</p><p>皆さん、ここまでお読みいただきありがとうございます。よければ僕の作ったアクションゲーム<sup>*</sup>を遊んでみてください。このゲームもこの当たり判定が使われていますよ!</p><p>それではまた!</p><p class=kome>編集部注:文化祭のみでの展示です。</p></div><nav class=nextPrev><div class=next>次へ<a href=https://asanobuturi.github.io/document/2019/ufo/>自作クレーンゲームの考察 ></a></div><div class=prev>前へ<a href=https://asanobuturi.github.io/document/2019/competition/>「競争」 ></a></div></nav></div><nav id=sidebar><div id=sidemenu><div class=side-back><a href=../index.html>記事の一覧へもどる<i class="fas fa-sign-out-alt"></i></a></div><div class=side-next><a href=https://asanobuturi.github.io/document/2019/ufo/>自作クレーンゲームの考察<i class="fas fa-angle-right"></i></a></div><div class=side-prev><a href=https://asanobuturi.github.io/document/2019/competition/><i class="fas fa-angle-left"></i>「競争」</a></div></div><div id=indexblock><div class=indextitle>目次</div><ol class=indexcontents></li><li><a href=#%e3%82%b2%e3%83%bc%e3%83%a0%e3%81%af%e3%83%95%e3%83%ac%e3%83%bc%e3%83%a0%e3%81%94%e3%81%a8%e3%81%ab%e5%87%a6%e7%90%86%e3%81%95%e3%82%8c%e3%81%a6%e3%81%84%e3%82%8b>ゲームはフレームごとに処理されている</a></li><li><a href=#%e3%83%97%e3%83%ac%e3%82%a4%e3%83%a4%e3%83%bc%e3%81%a8%e3%83%96%e3%83%ad%e3%83%83%e3%82%af%e3%81%ae%e5%bd%93%e3%81%9f%e3%82%8a%e5%88%a4%e5%ae%9a>プレイヤーとブロックの当たり判定</a></ol></div></nav></div><footer class=footer><p class=copyright>Copyright &copy; 2015 - 2022 Asano Physics Club, All Rights Reversed.</p></footer></main></body></html>