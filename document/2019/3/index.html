<!doctype html><html lang=ja><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=description content="大規模なデータを上手く扱うには、効率化されたアルゴリズムが必須です"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/scss/styles.min.7cd3d1799f57b044d496b6ef908a144b5396dfdad162f5891dee10878fc509c8.css><link rel=icon href=/image/favicon.svg type=image/svg+xml><link rel="icon alternate" href=/image/favicon.ico><meta property="og:site_name" content="浅野学園物理部"><meta property="og:url" content="https://asanobuturi.github.io/document/2019/3/index.html"><meta property="og:title" content="素晴らしいアルゴリズムの世界｜浅野学園物理部"><meta property="og:description" content="大規模なデータを上手く扱うには、効率化されたアルゴリズムが必須です"><meta property="og:type" content="website"><meta property="og:image" content="https://asanobuturi.github.io/document/2019/3/thumbnail.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@Uchi54_APC"><link rel=canonical href=https://asanobuturi.github.io/document/2019/3/><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115439668-1"></script><title>素晴らしいアルゴリズムの世界｜浅野学園物理部</title><script type=text/javascript src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><link rel=stylesheet href=/scss/highlight.min.9b4082acf90ec245e99e303a9e09c0a4ffa77b9754c98965a6bdb067c39e9c14.css><link rel=stylesheet href=/scss/article.min.5ab46a9154b676996cd1867b86fa75a6f6dfd4cf58534c093b363ff6739f3f03.css><link rel=stylesheet href=/scss/tableOfContents.min.603245923695f62c9be0618c1b6a10599acbf0f4f5056ffe631acd014b70fd17.css></head><body><nav id=nav-drawer><input id=nav-input type=checkbox class=nav-unshown>
<label id=nav-open for=nav-input><span class="bar bar1"></span><span class="bar bar2"></span><span class="bar bar3"></span><span class=menu>MENU</span>
<span class=close>CLOSE</span></label>
<label id=nav-close for=nav-input></label><div id=nav-content><a href=/index.html><img loading=lazy src=/image/favicon.svg id=nav-logo alt=浅野学園物理部></a>
<a class=nav-link href=/index.html>ホーム</a>
<a class=nav-link href=/about/index.html>物理部とは</a>
<a class="nav-link isActive" href=/document/index.html>部誌</a>
<a class=nav-link href=/game/index.html>ゲーム</a>
<a class=nav-link href=/blog/index.html>ブログ</a>
<a class=nav-link href=/electronic/index.html>電工の部屋</a><hr><a class=nav-link href=/credit/index.html>クレジット(ライセンス)</a></div></nav><main><div id=content><a name=top></a><div id=breadcrumbs><a href=/index.html><img src=/image/icons/home-solid.svg class=inline-image>ホーム</a>
<img src=/image/icons/angle-right-solid.svg class=inline-image>
<a href=/document/>部誌</a>
<img src=/image/icons/angle-right-solid.svg class=inline-image>
<a href=/document/2019/>2019年度・部誌</a>
<img src=/image/icons/angle-right-solid.svg class=inline-image>
<a href=/document/2019/3/>素晴らしいアルゴリズムの世界</a></div><header id=overview><h1 id=title>素晴らしいアルゴリズムの世界</h1><div><div class=properties><span class=author><img src=/image/icons/user-edit-solid.svg class=inline-image>
中野</span></div><div class=share><span><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-related=Uchi54_apc data-lang=ja data-show-count=false>Tweet</a>
<script async src=https://platform.twitter.com/widgets.js></script></span></div></div></header><article><p>どうも、中3の副部長の中野です。最近、僕の周りで競技プログラミングが流行っているので、少しアルゴリズムについて書こうかなと思います。</p><h2 id=対象読者>対象読者</h2><p>C++などのプログラミング言語の基礎をある程度抑えている人。</p><h2 id=競技プログラミングとは>競技プログラミングとは</h2><p>競技プログラミング(以下競プロ)とは、数学的な問題を制限時間内にプログラミングで回答する競技です。有名な競技プログラミングのプラットフォームとして、AtCoderが挙げられますが、問題文が日本語なので初心者でも比較的始めやすいと思います。何より代表のchokudaiさんが面白いです。</p><h2 id=累積和>累積和</h2><p>これは競プロだったら頻出のアルゴリズムですね。次のよな問題を考えてみてください。</p><blockquote><p><math><mi>Q</mi></math>個のクエリと長さ<math><mi>N</mi></math>の数列<math>
<mi>X</mi>
<mfenced separators=""><!--openとcloseを指定しなければデフォルトのカッコ"()"-->
    <mn>0</mn>
    <mo><=</mo>
    <mi>X</mi>
    <mfenced open="[" close="]" separators="">
        <mi>i</mi>
    </mfenced>
    <mo><=</mo>
    <msup><mn>10</mn><mn>3</mn></msup>
</mfenced>
</math>
が与えられる。また各クエリでは<math>
<mfenced open="" close=""><!--separatorsを指定しなければデフォルトのカンマ","-->
    <mi>l</mi>
    <mi>r</mi>
</mfenced>
<mfenced separators="">
    <mn>0</mn>
    <mo><=</mo>
    <mi>l</mi>
    <mo><</mo>
    <mi>r</mi>
    <mo><=</mo>
    <mi>N</mi>
</mfenced>
</math>
が与えられる。各クエリにて、数列<math><mi>X</mi></math>における区間<math>
<mfenced>
    <mi>l</mi>
    <mi>r</mi>
</mfenced>
</math>
の総和を求めよ。<math>
<mfenced separators="">
    <mn>0</mn>
    <mo><=</mo>
    <mi>Q</mi>
    <mtext>,</mtext>
    <mi>N</mi>
    <mo><=</mo>
    <mn>10</mn>
    <mspace width="0.5em"></mspace>
    <mn>18</mn>
    <mtext>とする。</mtext>
</mfenced>
</math></p></blockquote><p>このような問題は、ある程度プログラミングができる人なら、各クエリで<math><mi>r</mi></math>
から<math><mn>1</mn></math>
までのfor文を使って合計を求めて、それを出力して・・・と考えるかと思います。しかし、クエリの数や、<math><mi>N</mi></math>
の範囲が今回の成約のように膨大になってしまった場合、到底制限時間内に間に合いません(計算量が<math>
    <mi>O</mi>
    <mfenced>
        <mi>N</mi>
    </mfenced>
</math>
のためTLE=時間制限超えになってしまいます。)。</p><p>(下図は<a href=https://qiita.com/drken/items/56a6b68edef8fc605821>https://qiita.com/drken/items/56a6b68edef8fc605821</a>より引用。)</p><img src=image/image1.webp><p>そこで、<math>
<mi>S</mi>
    <mfenced open="[" close="]" separators="">
        <mi>i</mi>
        <mo>+</mo>
        <mn>1</mn>
    </mfenced>
    <mi>X</mi>
    <mfenced open="[" close="]" separators="">
        <mn>0</mn>
    </mfenced>
    <mo>+</mo>
    <mi>X</mi>
    <mfenced open="[" close="]" separators="">
        <mn>1</mn>
    </mfenced>
    <mo>+</mo>
    <mtext>⋯</mtext>
    <mi>X</mi>
    <mtext>@</mtext>
    <mfenced open="[" close="]" separators="">
        <mi>i</mi>
    </mfenced>
</math>
という漸化式が成り立つ配列Sを用意してあげます。そうすることによって各クエリでは<math>
    <mi>S</mi>
    <mfenced open="[" close="]" separators="">
        <mi>r</mi>
    </mfenced>
    <mo>-</mo>
    <mi>S</mi>
    <mfenced open="[" close="]" separators="">
        <mi>1</mi>
    </mfenced>
</math>
を算出すれば良いことになります。すると計算量は<math>
    <mi>O</mi>
    <mfenced separators="">
        <mi>N</mi>
        <mo>+</mo>
        <mi>Q</mi>
    </mfenced>
</math>
になり(前処理では<math>
    <mi>O</mi>
    <mfenced separators=""><mi>N</mi></mfenced>
</math>
かかりますが、オーダー記法において定数倍は無視できるのでさほど重要性は高くありません。)、十分間に合います。C++で実装するとこうなります。</p><script src=https://gist-it.appspot.com/https://github.com/asanobuturi/asanobuturi.github.io/blob/master/source/2019-algorithm-1.cpp></script><p>付属のコメントでだいたい理解はできたと思います。また、応用問題として
<a href=https://atcoder.jp/contests/abc122/tasks/abc122_c>https://atcoder.jp/contests/abc122/tasks/abc122_c</a>
などがあるのでよかったらぜひ(累積和以外の部分で少し考えないといけない。)。このように前計算をすることで計算量を減らすアルゴリズムは他にもたくさんあります。これらのアルゴリズムはかなり面白いので、一見の価値はあると思います。</p><h2 id=深さ優先探索dfs>深さ優先探索(DFS)</h2><p>この章では深さ優先探索という一種の探索アルゴリズムについてお話します。このアルゴリズムは先ほどの累積和とは違い、計算量を減らすようなアルゴリズムではなく、状態の遷移を扱うアルゴリズムです。要は状態が遷移できなくなるまで状態を進め、これ以上進めなくなったら一つ前の状態に戻します(もしくは違う場所を探索します)。この特性を活かしてDFSは再帰関数で実装されることが多いです。例として次のような問題を解いてみましょう。</p><blockquote><p>大きさがN*Mの庭があります。そこに雨が降り、水溜りができました。水溜りは8近傍で隣接している場合につながっているとします。全部でいくつの水溜りがあるでしょうか？(雨が降った場所はWで、降らなかった場所は.として入力される)</p><cite><a href="http://poj.org/problem?id=2386">POJ No.2386より引用</a></cite></blockquote><p>どのようにしてこのような問題を深さ優先探索のフレームワークに当てはめることができるのか考えるとこうなります。ここでいう「状態」とは8近傍に雨が降った場所があること、であります。そして8近傍に雨が降った場所がなくなったら探索を終了して、違う場所を探索します。これをC++で実装すると次のようになります。</p><script src=https://gist-it.appspot.com/https://github.com/asanobuturi/asanobuturi.github.io/blob/master/source/2019-algorithm-2.cpp></script><p>コメントで大体の流れはつかめたと思います。</p><h2 id=union-find>Union-Find</h2><p>この章ではUnion-Findについてお話しようと思います。Union-Findとは簡単に言うと「グループ管理」を行ってくれるクラスです。要素aとbが同じグループかを取得したり、aが属するグループとbが属するグループを併合したりすることができます(木の性質上、「分割」という行為はできない)。詳しい解説は<a href=https://www.slideshare.net/chokudai/union-find-49066733>chokudaiさんのこのスライド</a>を参照ください。 Union-Findクラスを実装するとこうなります。</p><script src=https://gist-it.appspot.com/https://github.com/asanobuturi/asanobuturi.github.io/blob/master/source/2019-algorithm-3.cpp></script><p>Union-Findを用いる問題であれば、このクラスを流用することができるので、テンプレとしてコピペしちゃってもいいかもしれませんね(一度は自分で写経なりなんなりしたほうが良いと思いますが)。ではUnion-Findを用いる問題を解いてみましょう。</p><blockquote><p>N個の都市があり、K本の道路と L本の鉄道が都市の間に伸びています。 i番目の道路は pi番目と qi番目の都市を双方向に結び、i番目の鉄道は ri番目とsi番目の都市を双方向に結びます。 異なる道路が同じ 2つの都市を結ぶことはありません。同様に、異なる鉄道が同じ 2つの都市を結ぶことはありません。</p><p>ある都市から別の都市に何本かの道路を通って到達できるとき、それらの都市は道路で連結しているとします。また、すべての都市はそれ自身と道路で連結しているとみなします。</p><p>鉄道についても同様に定めます。</p><p>全ての都市について、その都市と道路・鉄道のどちらでも連結している都市の数を求めてください。</p><cite><a href=https://atcoder.jp/contests/abc049/tasks/arc065_b>ABC049-Dより引用</a></cite></blockquote><p>これは典型的なUnion-Findです。最初にaとbが連結しているならばaとbをuniteしてあげる(道路・鉄道どっちもする)。各頂点iの道路・鉄道における根を格納しておく。それらの種類をmap等で表現する。そして最後にmapの各要素の値を出力してあげる。これが大まかな流れです。細かいところはコメントを見てください。</p><script src=https://gist-it.appspot.com/https://github.com/asanobuturi/asanobuturi.github.io/blob/master/source/2019-algorithm-4.cpp></script>## 最後に<p>今回の部誌は締め切り数日前に急いで書いたので、色々と変なところがあるかもしれませんが、ご了承ください。また今回紹介したアルゴリズムは数あるアルゴリズムの中の少しに過ぎません。これを気にアルゴリズムの沼に入ってくることを願っています。この部誌を手にとって読んでいただきありがとうございました。</p></article><span class=next>次へ<a href=https://asanobuturi.github.io/document/2019/4/>顔認識の仕組み＞</a></span><br><span class=prev>前へ<a href=https://asanobuturi.github.io/document/2019/2/>中学生が考える人工知能＞</a></span></div><aside id=sidebar><nav id=sidemenu><div class=side-back><a href=../index.html>記事の一覧へもどる<img src=/image/icons/sign-out-alt-solid.svg class=inline-image></a></div><div class=side-prev><a href=https://asanobuturi.github.io/document/2019/2/><img src=/image/icons/angle-left-solid.svg class=inline-image>中学生が考える人工知能</a></div><div class=side-next><a href=https://asanobuturi.github.io/document/2019/4/>顔認識の仕組み<img src=/image/icons/angle-right-solid.svg class=inline-image></a></div></nav><section id=indexblock><header class=indextitle>目次</header><nav id=TableOfContents><ul><li><a href=#対象読者>対象読者</a></li><li><a href=#競技プログラミングとは>競技プログラミングとは</a></li><li><a href=#累積和>累積和</a></li><li><a href=#深さ優先探索dfs>深さ優先探索(DFS)</a></li><li><a href=#union-find>Union-Find</a></li></ul></nav></section></aside></main><footer id=footer><p class=copyright>Copyright &copy; 2015 - 2023 Asano Physics Club, All Rights Reversed.</p><p class=note></p></footer></body></html>