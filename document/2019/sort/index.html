<!doctype html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>いろんなソート|浅野学園物理部</title>

    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
    <link rel="stylesheet" href="../../../styles.css">
    <link rel="stylesheet" href="../../../documentstyle.css">
    <link rel="shortcut icon" href="../../../image/favicon.ico">
    <script type="text/javascript" src="//typesquare.com/accessor/script/typesquare.js?YME8OdI00sA%3D" charset="utf-8"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-MML-AM_CHTML' async></script><!--MathJax適用-->
</head>
<body>
    <div id="nav-drawer">
        <input id="nav-input" type="checkbox" class="nav-unshown">
        <label id="nav-open" for="nav-input">
            <span class="bar bar1"></span>
            <span class="bar bar2"></span>
            <span class="bar bar3"></span>
            <span class="menu">MENU</span>
            <span class="close">CLOSE</span>
        </label>
        <label id="nav-close" for="nav-input"></label>
        <div id="nav-content">
            <a class="nav-link" href="../../../">ホーム</a>
            <a class="nav-link" href="../../../about.html">物理部とは</a>
            <a class="nav-link isActive" href="../../../document.html">部誌</a>
            <a class="nav-link" href="../../../game/index.html">ゲーム</a>
            <a class="nav-link" href="../../">ブログ</a>
            <div class="nav-separator"></div>
            <a class="nav-link" href="http://d.hatena.ne.jp/apc/">ブログ(外部サイト)</a>
        </div>
    </div>
    <main>
        <div id="main">
            <article class="documentcontent">
                <header class="documenttitle">
                    <h1>いろんなソート</h1>
                    <p class="author">高校2年・Y.K.</p>
                    <a href="https://twitter.com/intent/tweet?url=https://asanobuturi.github.io/document/2019/sort/index.html&text=浅野学園物理部部誌2019「いろんなソート」&via=Uchi54_APC&related=Uchi54_APC" class="twitter-share-button" data-show-count="false">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                </header>
                <div class="document">
                    <h2>ソートとは</h2>
                    <p>タイトルにある「ソート」を聞いたことがあるでしょうか？Excelを触ったことのある人ならご存知かもしれません。英語の動詞であるソート(sort)は「分類する」「区分する」という意味を持ち、「並び替える」という意味で使われることが多いです。ここではプログラム上でこのソートを実行する方法について述べていきます。</p>
                    <h2>用語確認など</h2>
                    <p>昇順でソートする、降順でソートする、という表現がありますが、昇順は小さい順、降順は大きい順、と読み替えてください。</p>
                    <p>また、ここでは計算量、というものを使って説明をしていきます。よく用いられるのは「ランダウの記号」や「オーダー記法」と呼ばれる記法で、
                        <math>
                            <mi>O</mi>
                            <mfenced separators=""><mi>N</mi></mfenced>
                        </math>
                        や
                        <math>
                            <mi>O</mi>
                            <mfenced separators="">
                                <msup>
                                    <mi>N</mi>
                                    <mn>2</mn>
                                </msup>
                            </mfenced>
                        </math>
                        と表します。</p>
                        <p>
                                ここで右上についている数字は累乗を表すもので、
                                <math>
                                    <msup>
                                        <mi>N</mi>
                                        <mn>3</mn>
                                    </msup>
                                    <mo>=</mo>
                                    <mi>N</mi>
                                    <mo>*</mo>
                                    <mi>N</mi>
                                    <mo>*</mo>
                                    <mi>N</mi>
                                    <mfenced separators="">
                                        <mi>N</mi>
                                        <mtext>の</mtext>
                                        <mn>3</mn>
                                        <mtext>乗</mtext>
                                    </mfenced>
                                </math>
                                、
                                <math>
                                    <msup>
                                        <mi>N</mi>
                                        <mn>4</mn>
                                    </msup>
                                    <mo>=</mo>
                                    <mi>N</mi>
                                    <mo>*</mo>
                                    <mi>N</mi>
                                    <mo>*</mo>
                                    <mi>N</mi>
                                    <mo>*</mo>
                                    <mi>N</mi>
                                    <mfenced separators="">
                                        <mi>N</mi>
                                        <mtext>の</mtext>
                                        <mn>4</mn>
                                        <mtext>乗</mtext>
                                    </mfenced>
                                </math>
                                といったようにその数字の分だけ<math><mi>N</mi></math>というなんらかの数字を掛け 合わせる、というものです(の場合もあります)。
                        </p>
                        <p>
                                また
                                <math>
                                    <mtext>log</mtext>
                                    <mfenced separators=""><mtext>ログ</mtext></mfenced>
                                </math>
                                という対数関数を用いますが、これは 先程の累乗の逆で、
                                <math>
                                    <msub>
                                        <mtext>log</mtext>
                                        <mn>2</mn>
                                    </msub>
                                    <mspace width="0.5em" />
                                    <mi>N</mi>
                                </math>
                                は「<math><mn>2</mn></math>の何乗が<math><mi>N</mi></math>になるのか」を表し、
                                <math>
                                    <msub>
                                        <mtext>log</mtext>
                                        <mn>2</mn>
                                    </msub>
                                    <mspace width="0.5em" />
                                    <mn>8</mn>
                                    <mo>=</mo>
                                    <mn>3</mn>
                                    <mfenced separators="">
                                        <mtext>ログ</mtext>
                                        <mn>2</mn>
                                        <mtext>の</mtext>
                                        <mn>8</mn>
                                    </mfenced>
                                </math>
                                、
                                <math>
                                        <msub>
                                            <mtext>log</mtext>
                                            <mn>3</mn>
                                        </msub>
                                        <mspace width="0.5em" />
                                        <mn>243</mn>
                                        <mo>=</mo>
                                        <mn>5</mn>
                                        <mfenced separators="">
                                            <mtext>ログ</mtext>
                                            <mn>3</mn>
                                            <mtext>の</mtext>
                                            <mn>243</mn>
                                        </mfenced>
                                </math>
                                となります。ざっくりと言うのであれば、桁数だと考えればよいです。 
                                <math>
                                        <msub>
                                            <mtext>log</mtext>
                                            <mn>10</mn>
                                        </msub>
                                        <mspace width="0.5em" />
                                        <mn>100</mn>
                                        <mo>=</mo>
                                        <mn>2</mn>
                                </math>
                                ,
                                <math>
                                        <msub>
                                            <mtext>log</mtext>
                                            <mn>10</mn>
                                        </msub>
                                        <mspace width="0.5em" />
                                        <mn>152</mn>
                                        <mo>=</mo>
                                        <mn>2.18184</mn>
                                        <mtext>⋯</mtext>
                                </math>というように整数部分が(右下の数字の位取り記数法 では)桁数-1と一致します。オーダー記法では 
                                <math>
                                    <mi>O</mi>
                                    <mfenced separators="">
                                        <mtext>log</mtext>
                                        <mspace width="0.5em" />
                                        <mi>N</mi>
                                    </mfenced>
                                </math>
                                と右下の数字を省略することが多いで す。 要するにオーダー記法というのはある値(ここでは<math><mi>N</mi></math>>)の増加に対してどの程度増加するか、という度合いを表すもので、 
                                <math>
                                    <mi>O</mi>
                                    <mfenced>
                                        <msup>
                                            <mi>N</mi>
                                            <mn>2</mn>
                                        </msup>
                                    </mfenced>
                                </math>は<math><mi>N</mi></math>が2倍になると 4 倍、100 倍になると 10000 倍になる、と いうものを表します。また
                                <math>
                                    <mfenced separators="">
                                        <mi>N</mi>
                                        <mo>-</mo>
                                        <mn>2</mn>
                                    </mfenced>
                                    <mo>*</mo>
                                    <mi>N</mi>
                                    <mo>+</mo>
                                    <mn>5</mn>
                                </math>
                                などは
                                <math>
                                    <mi>O</mi>
                                    <mfenced separators="">
                                        <msup>
                                            <mi>N</mi>
                                            <mn>2</mn>
                                        </msup>
                                    </mfenced>
                                </math>
                                と、より大きく変化する部分のみ表記し ます。 前置きが長くなりましたが、本題に入っていきます。
                        </p>
                        <h2>総当り</h2>
                        <p>すべての組み合わせを試し、昇順や降順になっていたらそれを選ぶ、という確実な方法です。</p>
                        <p>
                                計算するのに要する時間、つまり時間計算量は
                                <math>
                                    <mi>O</mi>
                                    <mfenced separators="">
                                        <mi>N</mi>
                                        <mo>*</mo>
                                        <mi>N</mi>
                                        <mo>!</mo>
                                    </mfenced>
                                </math>
                                です。ここで
                                <math>
                                    <mi>N</mi>
                                    <mo>!</mo>
                                    <mfenced separators="">
                                        <mi>N</mi>
                                        <mtext>の階乗</mtext>
                                    </mfenced>
                                </math>
                                とは
                                <math>
                                    <mn>1</mn>
                                    <mo>*</mo>
                                    <mn>2</mn>
                                    <mo>*</mo>
                                    <mn>3</mn>
                                    <mo>*</mo>
                                    <mn>4</mn>
                                    <mo>*</mo>
                                    <mtext>⋯⋯</mtext>
                                    <mo>*</mo>
                                    <mfenced separators="">
                                        <mi>N</mi>
                                        <mo>-</mo>
                                        <mn>1</mn>
                                    </mfenced>
                                    <mo>*</mo>
                                    <mi>N</mi>
                                </math>
                                のことで、
                                <math>
                                    <mn>10</mn>
                                    <mo>!=</mo>
                                    <mn>3628800</mn>
                                </math>
                                ,
                                <math>
                                    <mn>15</mn>
                                    <mo>!=</mo>
                                    <mn>1307674368000</mn>
                                </math>
                                と爆発的に増えていきます。
                        </p>
                        <p>
                                それぞれの並びについて、小さい順に並んでいるかどうか<math><mi>N</mi></math>個見て確かめるので
                                <math>
                                    <mi>N</mi>
                                    <mo>*</mo>
                                    <mi>N</mi>
                                    <mo>!</mo>
                                </math>
                                になっています。この場合、15個程度のデータを並び替えるだけでも膨大な時間がかかります。
                        </p>
                        <p>
                                3個の場合で少し やってみましょう。<math><mfenced open="{" close="}"><mn>3</mn><mn>1</mn><mn>2</mn></mfenced></math>という3つの数字を並び替えてみます。並べ方をすべて挙げると
                                <math>
                                    <mfenced open="{" close="}">
                                        <mn>3</mn>
                                        <mn>1</mn>
                                        <mn>2</mn>
                                    </mfenced>
                                    <mfenced open="{" close="}">
                                        <mn>3</mn>
                                        <mn>2</mn>
                                        <mn>1</mn>
                                    </mfenced>
                                    <mfenced open="{" close="}">
                                        <mn>1</mn>
                                        <mn>3</mn>
                                        <mn>2</mn>
                                    </mfenced>
                                    <mfenced open="{" close="}">
                                        <mn>1</mn>
                                        <mn>2</mn>
                                        <mn>3</mn>
                                    </mfenced>
                                    <mfenced open="{" close="}">
                                        <mn>2</mn>
                                        <mn>3</mn>
                                        <mn>1</mn>
                                    </mfenced>
                                    <mfenced open="{" close="}">
                                        <mn>2</mn>
                                        <mn>1</mn>
                                        <mn>3</mn>
                                    </mfenced>
                                </math>
                                となり、昇順となっているのは<math><mfenced open="{" close="}"><mn>1</mn><mn>2</mn><mn>3</mn></mfenced></math>、降順となっているのは<math><mfenced open="{" close="}"><mn>3</mn><mn>2</mn><mn>1</mn></mfenced></math>でソートできました。
                        </p>
                        <p>次は4個、と行きたいですが
                                <math>
                                    <mn>4</mn>
                                    <mo>!=</mo>
                                    <mn>24</mn>
                                </math>
                                個も書きたくないので省略します。とにかく総当りでは時間がかかります。
                        </p>
                        <h2>バブルソート</h2>
                        <p>
                                総当たりよりはマシなソート方法がこれで、単純なルールなのでよく紹介される方法です。 昇順でソートする前提で進めます。まず<math><mn>1</mn></math>番目の数と<math><mn>2</mn></math>番目の数を比べて、<math><mn>1</mn></math>番目の数の方が大きければ2つの数を入れ替えます。次に<math><mn>2</mn></math>番目の数と<math><mn>3</mn></math>番目の数を比べて、<math><mn>2</mn></math>番目の数のほうが大きければ入れ替えます。・・・というように一番目から順番に2つずつ大小を比較し大きいものを<math><mi>N</mi></math>番目の 方へ持っていきます。
                        </p>
                        <img src="image/image1.png">
                        <p>
                                これで最大値が最後に来ることになります。これを次は<math><mn>1</mn></math>番目~<math><mn><mi>N</mi><mo>-</mo><mn>1</mn></math>番目に対して実行します。
                        </p>
                        <p>すると二番目に大きい下図が<math><mn><mi>N</mi><mo>-</mo><mn>1</mn></math>番目に現れます。</p>
                        <img src="image/image2.png">
                        <p>
                                このように最大値を最後の方に寄せていけば、最終的に昇順に並ぶことになります。
                                <math><mi>N</mi></math>>個分最大値を最後の方へ寄せるので、時間計算量は
                                <math>
                                    <mi>O</mi>
                                    <mfenced separators="">
                                        <mi>N</mi>
                                        <mn>2</mn>
                                    </mfenced>
                                </math>
                                です。
                                O(N!)
                                <math>
                                    <mi>O</mi>
                                    <mfenced separators="">
                                        <mi>N</mi>
                                        <mo>!</mo>
                                    </mfenced>
                                </math>
                                に比べれば小さいですが、それでも<math><mi>N</mi></math>が<math><mn>1000</mn></math>倍になれば<math><msup><mi>N</mi><mn>2</mn></msup></math>は<math><mn>1000000</mn></math>倍になってしまうのでたくさんのデータになると何時間も時間がかかるようになってしまいます(このバブルソートを改良したシェーカーソートというものもあります)。
                        </p>
                        <h2>選択ソート</h2>
                        <p>バブルソートと似た方針で、最小値または最大値を端に寄せていくソートです。今回は最小の要 素と最初の要素を入れ替えていく方法を紹介します。</p>
                        <img src="image/image3.png">
                        <p>これも<math><mi>N</mi></math>個のうちから最小値を探すことを<math><mi>N</mi></math>回繰り返すので時間計算量は
                            <math>
                                <mi>O</mi>
                                <mfenced separators="">
                                    <msup>
                                        <mi>N</mi>
                                        <mn>2</mn>
                                    </msup>
                                </mfenced>
                            </math>
                            となります。
                        </p>
                        <h2>挿入ソート</h2>
                        <p>目的の要素以前がソートされている状態にしてあるとして、その要素を正しい位置に挿入していくソートです。図で見たほうがわかりやすいかもしれません。</p>
                        <img src="image/image4.png">
                        <p>
                            <math>
                                <mfenced separators="">
                                    <mi>N</mi>
                                    <mo>-</mo>
                                    <mn>1</mn>
                                </mfenced>
                            </math>    
                            回の挿入操作それぞれに
                            <math>
                                <mi>O</mi>
                                <mfenced separators="">
                                    <mi>N</mi>
                                </mfenced>
                            </math>
                            を要するので計算量は
                            <math>
                                <mi>O</mi>
                                <mfenced separators="">
                                    <msup>
                                        <mi>N</mi>
                                        <mn>2</mn>
                                    </msup>
                                </mfenced>
                            </math>
                            となります。(二分探索と呼ばれる手法を用いると比較回数を減らすことができます。詳細は各自で調べてみると良いでしょう。)
                        </p>
                        <h2>クイックソート</h2>
                        <p>
                                これまで
                                <math>
                                    <mi>O</mi>
                                    <mfenced separators="">
                                        <msup>
                                            <mi>N</mi>
                                            <mn>2</mn>
                                        </msup>
                                    </mfenced>
                                </math>
                                のアルゴリズムを紹介してきましたがここからは高速なってきます。このクイックソートは平均
                                <math>
                                    <mi>O</mi>
                                    <mfenced separators="">
                                        <mi>N</mi>
                                        <mspace width="0.5em" />
                                        <mtext>log</mtext>
                                        <mspace width="0.5em" />
                                        <mi>N</mi>
                                    </mfenced>
                                </math>
                                で計算できます。まず、ピボット(pivot)と呼ばれる、基準の値を一つ取ります。ここでは最初の値を取ることにします。そして、ピボットより小さい値を最初の方へ、ピボット以上の値を最後の方へ寄せます。
                        </p>
                        <img src="image/image5.png">
                        <p>そしてピボット未満の部分、ピボット以上の部分をそれぞれクイックソートします。</p>
                        <img src="image/image6.png">
                        <p>このように、クイックソートの中でクイックソートを利用する、というようなものを呼び出しと言います。ただし、要素の数が1以下の場合は「ソートされている」と言えるので改めてなにかせずに打ち切る必要があります。そうでないと無限にソートしようとしてしまいます。</p>
                        <p>クイックソートはピボットの選び方によって所要時間が変化し、最悪時間計算量は
                            O(N2)
                            <math>
                                <mi>O</mi>
                                <mfenced separators="">
                                    <msup>
                                        <mi>N</mi>
                                        <mn>2</mn>
                                    </msup>
                                </mfenced>
                            </math>
                            です。しかし、多くの場合においてこれは
                            <math>
                                <mi>O</mi>
                                <mfenced separators="">
                                    <mi>N</mi>
                                    <mspace width="0.5em" />
                                    <mtext>log</mtext>
                                    <mspace width="0.5em" />
                                    <mi>N</mi>
                                </mfenced>
                            </math>
                            で動作し、そのため高速なソートとして知られています。</p>
                            <h3>コラム：再帰</h3>
                            <p>さて、クイックソートの説明の中で再帰という単語が現れましたが、これについて例を挙げて補足しておきます。</p>
                            <p>「総当り」で登場した階乗の定義を見てみましょう。</p>
                            <p class="text-center">
                                <math>
                                    <mi>N</mi>
                                    <mo>!=</mo>
                                    <mn>1</mn>
                                    <mo>*</mo>
                                    <mn>2</mn>
                                    <mo>*</mo>
                                    <mn>3</mn>
                                    <mo>*</mo>
                                    <mtext>⋯⋯</mtext>
                                    <mo>*</mo>
                                    <mfenced separators="">
                                        <mi>N</mi>
                                        <mo>-</mo>
                                        <mn>1</mn>
                                    </mfenced>
                                    <mo>*</mo>
                                    <mi>N</mi>
                                </math>
                            </p>
                            <p>これを再帰的に定義し直してみます。</p>
                            <p>
                                <math>
                                    <mi>N</mi>
                                    <mo>!=</mo>
                                    <mn>1</mn>
                                    <mo>*</mo>
                                    <mn>2</mn>
                                    <mo>*</mo>
                                    <mn>3</mn>
                                    <mo>*</mo>
                                    <mtext>⋯⋯</mtext>
                                    <mo>*</mo>
                                    <mfenced separators="">
                                        <mi>N</mi>
                                        <mo>-</mo>
                                        <mn>1</mn>
                                    </mfenced>
                                </math>
                                の部分は
                                <math>
                                    <mfenced separators="">
                                        <mi>N</mi>
                                        <mo>-</mo>
                                        <mn>1</mn>
                                    </mfenced>
                                    <mo>!</mo>
                                </math>
                                と表せるので、先程の式に当てはめると
                                <math>
                                    <mi>N</mi>
                                    <mo>!=</mo>
                                    <mfenced separators="">
                                        <mi>N</mi>
                                        <mo>-</mo>
                                        <mn>1</mn>
                                    </mfenced>
                                    <mo>!*</mo>
                                    <mi>N</mi>
                                </math>
                                となり、
                                <math>
                                    <mi>N</mi>
                                    <mo>=</mo>
                                    <mn>1</mn>
                                </math>
                                のとき
                                <math>
                                    <mi>N</mi>
                                    <mo>!=</mo>
                                    <mn>1</mn>
                                </math>
                                なので
                                <math>
                                    <mi>N</mi>
                                    <mo>!</mo>
                                </math>
                                の再帰的定義は下記のようになります。
                            </p>
                            <p>
                                これは「自然数<math><mi>N</mi></math>について,<math><mi>N</mi><mo>=</mo><mn>1</mn></math>のとき<math><mi>N</mi><mo>!=</mo><mn>1</mn></math>,<math><mi>N</mi><mo>></mo><mn>1</mn></math>のとき
                                <math>
                                    <mi>N</mi>
                                    <mo>!=</mo>
                                    <mi>N</mi>
                                    <mo>*</mo>
                                    <mfenced separators="">
                                        <mi>N</mi>
                                        <mo>-</mo>
                                        <mn>1</mn>
                                    </mfenced>
                                    <mo>!</mo>
                                </math>
                                」を表すものです。階乗の定義の中に階乗が含まれていますが、この場合<math><mi>N</mi><mo>!</mo></math>の定義の中に<math><mi>N</mi><mo>!</mo></math>自身、もしくは<math><mi>M</mi><mo>!</mo><mfenced separators=""><mi>M</mi><mo>></mo><mi>N</mi></mfenced></math>が現れない限り問題はありません。再帰sという概念はそのうち数学でも出てくると思うので、覚えておいて損はないでしょう。
                            </p>
                            <h2>マージソート</h2>
                            <p>今まで紹介したソートは「与えられたデータの領域の中だけで完結する」もの、つまり「<math><mi>a</mi></math>>番目の要素と<math><mi>b</mi></math>>番目の要素を比較、または交換する」のみでソートが可能でした。しかしこのマージソートでは、新しく別の領域を利用しなければなりません。</p>
                            <p>まずはデータを半分に分け、片方ずつマージソートをします。</p>
                            <img src="image/image7.png">
                            <p>そしてこの2つを「マージ」していくのですが、この時に新しい別の領域が必要になります。説明のためもともとの領域をA、用意する別の領域をBとします。</p>
                            <p>ここでのマージとは「ソートされた2つのデータを合成すること」なのですが、合成した後もソートされた状態になっているように合成します。実際に上の2つをマージしてみましょう。それぞれ先頭の要素を比較し、小さい方を領域Bに後ろから詰めていきます。</p>
                            <img src="image/image8.png">
                            <p>このようにしてマージした後、領域Aを領域Bで上書きすればマージ完了です。</p>
                            <p>時間計算量は
                                <math>
                                    <mi>O</mi>
                                    <mfenced separators="">
                                        <mi>N</mi>
                                        <mspace width="0.5em" />
                                        <mtext>log</mtext>
                                        <mspace width="0.5em" />
                                        <mi>N</mi>
                                    </mfenced>
                                </math>
                                と高速ですが、領域Bを用意する必要があり、このような「計算時に必要となる記憶領域の容量」を空間計算量と呼び、このマージソートでは空間計算量が
                                <math>
                                    <mi>O</mi>
                                    <mfenced separators="">
                                        <mi>N</mi>
                                    </mfenced>
                                </math>
                                です。
                            </p>
                            <h2>インプレースマージソート</h2>
                            <p>マージソートでネックとなる空間計算量を
                                <math>
                                    <mi>O</mi>
                                    <mfenced separators="">
                                        <mn>1</mn>
                                    </mfenced>
                                </math>
                                、つまり外部領域を使わずにできるようにしたのがこのインプレースマージソートです。ただし時間計算量が
                                <math>
                                    <mi>O</mi>
                                    <mfenced separators="">
                                        <mi>N</mi>
                                        <mspace width="0.5em" />
                                        <msup>
                                            <mfenced separators="">
                                                <mtext>log</mtext>
                                                <mspace width="0.5em" />
                                                <mi>N</mi>
                                            </mfenced>
                                            <mn>2</mn>
                                        </msup>
                                    </mfenced>
                                </math>
                                と少し遅くなります。
                            </p>
                            <p>別の領域を使わないインプレースマージでは、クイックソートのような工夫をします。2つに分割した領域をそれぞれ領域
                            <math>
                                <mfenced open="" close="">
                                <mi>L</mi>
                                    <mi>R</mi>
                                </mfenced>
                            </math>
                            とし、ピボットを<math><mi>p</mi></math>とすると、それぞれの領域について<math><mi>p</mi></math>を基準に<math><mi>p</mi></math>未満の要素を最初の方へ、<math><mi>p</mi></math>以上の要素を最後の方へ寄せます。ここでそれらの領域をLL,LR,RL,RR
                            <math>
                                <mfenced open="" close="">
                                    <msub>
                                        <mi>L</mi>
                                        <mi>L</mi>
                                    </msub>
                                    <msub>
                                            <mi>L</mi>
                                            <mi>R</mi>
                                    </msub>
                                    <msub>
                                            <mi>R</mi>
                                            <mi>L</mi>
                                    </msub>
                                    <msub>
                                            <mi>R</mi>
                                            <mi>R</mi>
                                    </msub>
                                </mfenced>
                            </math>
                            とすると、
                            <math>
                                <msub>
                                        <mi>L</mi>
                                        <mi>R</mi>
                                </msub>
                            </math>
                            と
                            <math>
                                <msub>
                                        <mi>R</mi>
                                        <mi>L</mi>
                                </msub>
                            </math>
                            を入れ替えます。
                        </p>
                        <img src="image/image9.png">
                        <p>
                            そして領域
                            <math>
                                <msub>
                                    <mi>L</mi>
                                    <mi>L</mi>
                                </msub>
                            </math>
                            と領域
                            <math>
                                    <msub>
                                        <mi>R</mi>
                                        <mi>L</mi>
                                    </msub>
                            </math>
                            、領域
                            <math>
                                    <msub>
                                        <mi>L</mi>
                                        <mi>R</mi>
                                    </msub>
                            </math>
                            と領域
                            <math>
                                    <msub>
                                        <mi>R</mi>
                                        <mi>R</mi>
                                    </msub>
                            </math>
                            をそれぞれインプレースマージします。
                        </p>
                        <img src="image/image10.png">
                        <p>このようにすることで新たに領域を用意せずともマージが可能となります。</p>
                        <h2>基数ソート</h2>
                        <p>
                            基数ソートは内部でバケットソートを使うのが一般的なので、バケットソートを先に紹介します。バケットソートは決まった範囲の値しか存在しないとわかっている時に可能なソートです。例えば1 ~ 5の値しかないものをソートするとき、「バケツ」と呼ぶ新たな領域を値の種類数分、ここでは5個用意します。そして元のデータを順番に見ていき、1なら「1のバケツ」に、2なら「2のバケツ」に、といったように順番に入れていきます。全て入れ終わったら、「1のバケツ」から順に入っている値を並べていきます。
                        </p>
                        <img src="image/image11.png">
                        <p>
                            バケットソートの時間計算量は、値の種類数をKとすると
                            <math>
                                <mi>O</mi>
                                <mfenced separators="">
                                    <mi>N</mi>
                                    <mo>+</mo>
                                    <mi>K</mi>
                                </mfenced>
                            </math>
                            となります。多くの場合においてKは有限の値を取るため、時間計算量を
                            <math>
                                <mi>O</mi>
                                <mfenced separators="">
                                    <mi>N</mi>
                                </mfenced>
                            </math>
                            とする場合もあります。また、最悪空間計算量も
                            <math>
                                    <mi>O</mi>
                                    <mfenced separators="">
                                        <mi>N</mi>
                                        <mo>+</mo>
                                        <mi>K</mi>
                                    </mfenced>
                            </math>
                            となります。
                        </p>
                        <p>
                            そして基数ソートとは、位取り記数法ができるもの(つまり普通の整数や小数)や文字数の決まったアルファベットのみの文字列などを要素とするデータである場合に適用できます。10進法における3桁以下の整数を例に取ってみましょう。下の位から順番に、種類数が10のバケットソートをしていきます。
                        </p>
                        <img src="image/image12.png">
                        <p>
                            各桁について値の種類数が有限なバケットソートをするので、桁数<math><mi>D</mi></math>とすると、時間計算量は
                            <math>
                                <mi>O</mi>
                                <mfenced separators="">
                                    <mi>D</mi>
                                    <mfenced separators="">
                                        <mi>N</mi>
                                        <mo>+</mo>
                                        <mn>10</mn>
                                    </mfenced>
                                </mfenced>
                                <mo>=</mo>
                                <mi>O</mi>
                                <mfenced separators="">
                                    <mi>DN</mi>
                                </mfenced>
                            </math>
                            となります。10進数に限らず、各桁について<math><mi>K</mi></math>種類の値を取る場合、時間計算量は
                            <math>
                                <mi>O</mi>
                                <mfenced separators="">
                                    <mi>D</mi>
                                    <mfenced separators="">
                                        <mi>N</mi>
                                        <mo>+</mo>
                                        <mi>K</mi>
                                    </mfenced>
                                </mfenced>
                            </math>
                            です。
                        </p>
                        <h2>終わりに</h2>
                        <p>以上有名なソートアルゴリズムをいくつか紹介しましたが、いかがでしたでしょうか。実際にソートをしてみたい人は、トランプを適当な枚数取って自分で並び替えてみると良いでしょう。ちなみに個人的に好きなソートは基数ソートです。ここで紹介したソートアルゴリズムを筆者がC++で実装をしたので、下にそのソースコードを添えておきたいと思います。もし不備や間違いなどが合った場合は GitHubのissueに投げるなどしてください。</p>
                        <script src="https://gist-it.appspot.com/https://github.com/asanobuturi/asanobuturi.github.io/blob/master/document/2019/sort/source/sort.hpp"></script>
                    </div>
                <nav class="nextPrev">
                    <div class="prev">前へ<a href="../ownmade-pc/index.html">自作PCについていろいろ &gt;</a></div>
                    <div class="next">次へ<a href="../competition/index.html">「競争」 &gt;</a></div>
                </nav>
            </article>
        </div>
        <footer class="footer">
            <div class="">
                <p class="copylight">&copy; 2015 Asano Physics Club</p>
            </div>
        </footer>
    </main>
</body>
</html>